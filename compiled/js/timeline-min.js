(function(){var a=!1,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var f=this.prototype;a=!0;var e=new this;a=!1;for(var h in c)e[h]="function"==typeof c[h]&&"function"==typeof f[h]&&b.test(c[h])?function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);this._super=c;return d}}(h,c[h]):c[h];d.prototype=e;d.prototype.constructor=d;d.extend=arguments.callee;
return d}})();var global=function(){return this||(0,eval)("this")}();
if("undefined"==typeof VMM){var VMM=Class.extend({});VMM.debug=!0;VMM.master_config={init:function(){return this},sizes:{api:{width:0,height:0}},vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",api_keys_master:{flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"uQKadH1VMlCsp560gN2aOiMz4evWkl1s34yryl3F/9FJOsn+/948CbBUvKLN46U=",twitter:""},timers:{api:7E3},api:{pushques:[]},twitter:{active:!1,array:[],api_loaded:!1,que:[]},flickr:{active:!1,array:[],
api_loaded:!1,que:[]},youtube:{active:!1,array:[],api_loaded:!1,que:[]},vimeo:{active:!1,array:[],api_loaded:!1,que:[]},vine:{active:!1,array:[],api_loaded:!1,que:[]},webthumb:{active:!1,array:[],api_loaded:!1,que:[]},googlemaps:{active:!1,map_active:!1,places_active:!1,array:[],api_loaded:!1,que:[]},googledocs:{active:!1,array:[],api_loaded:!1,que:[]},googleplus:{active:!1,array:[],api_loaded:!1,que:[]},wikipedia:{active:!1,array:[],api_loaded:!1,que:[],tries:0},soundcloud:{active:!1,array:[],api_loaded:!1,
que:[]}}.init();VMM.createElement=function(a,b,c,d,f){var e="";null!=a&&""!=a&&(e+="<"+a,null!=c&&""!=c&&(e+=" class='"+c+"'"),null!=d&&""!=d&&(e+=" "+d),null!=f&&""!=f&&(e+=" style='"+f+"'"),e+=">",null!=b&&""!=b&&(e+=b),e=e+"</"+a+">");return e};VMM.createMediaElement=function(a,b,c){var d;d="<div class='media'>";null!=a&&""!=a&&(valid=!0,d+="<img src='"+a+"'>",null!=c&&""!=c&&(d+=VMM.createElement("div",c,"credit")),null!=b&&""!=b&&(d+=VMM.createElement("div",b,"caption")));return d+"</div>"};
VMM.hideUrlBar=function(){var a=window,b=a.document;if(!location.hash||!a.addEventListener){window.scrollTo(0,1);var c=1,d=setInterval(function(){b.body&&(clearInterval(d),c="scrollTop"in b.body?b.body.scrollTop:1,a.scrollTo(0,1===c?0:1))},15);a.addEventListener("load",function(){setTimeout(function(){a.scrollTo(0,1===c?0:1)},0)},!1)}}}function trace(a){VMM.debug&&(window.console?console.log(a):"undefined"!=typeof jsTrace&&jsTrace.send(a))}
Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,c)};Date.prototype.getWeek=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil(((this-a)/864E5+a.getDay()+1)/7)};Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil((this-a)/864E5)};
var is={Null:function(a){return null===a},Undefined:function(a){return void 0===a},nt:function(a){return null===a||void 0===a},Function:function(a){return"function"===typeof a?null!==a.constructor.toString().match(/Function/):!1},String:function(a){return"string"===typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/string/i):!1},Array:function(a){return"object"===typeof a?null!==a.constructor.toString().match(/array/i)||void 0!==a.length:!1},Boolean:function(a){return"boolean"===
typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/boolean/i):!1},Date:function(a){return"date"===typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/date/i):!1},HTML:function(a){return"object"===typeof a?null!==a.constructor.toString().match(/html/i):!1},Number:function(a){return"number"===typeof a?!0:"object"===typeof a?null!==a.constructor.toString().match(/Number/):!1},Object:function(a){return"object"===typeof a?null!==a.constructor.toString().match(/object/i):
!1},RegExp:function(a){return"function"===typeof a?null!==a.constructor.toString().match(/regexp/i):!1}},type={of:function(a){for(var b in is)if(is[b](a))return b.toLowerCase()}};
"undefined"!=typeof VMM&&(VMM.smoothScrollTo=function(a,b,c){if("undefined"!=typeof jQuery){var d="easein",f=1E3;null!=b&&(f=1>b?1:Math.round(b));null!=c&&""!=c&&(d=c);jQuery(window).scrollTop()!=VMM.Lib.offset(a).top&&VMM.Lib.animate("html,body",f,d,{scrollTop:VMM.Lib.offset(a).top})}},VMM.attachElement=function(a,b){"undefined"!=typeof jQuery&&jQuery(a).html(b)},VMM.appendElement=function(a,b){"undefined"!=typeof jQuery&&jQuery(a).append(b)},VMM.getHTML=function(a){if("undefined"!=typeof jQuery)return a=
jQuery(a).html()},VMM.getElement=function(a,b){var c;if("undefined"!=typeof jQuery)return c=b?jQuery(a).parent().get(0):jQuery(a).get(0)},VMM.bindEvent=function(a,b,c,d){var f="click",e={};null!=c&&""!=c&&(f=c);null!=e&&""!=e&&(e=d);"undefined"!=typeof jQuery&&jQuery(a).bind(f,e,b)},VMM.unbindEvent=function(a,b,c){var d="click";null!=c&&""!=c&&(d=c);"undefined"!=typeof jQuery&&jQuery(a).unbind(d,b)},VMM.fireEvent=function(a,b,c){var d="click",f=[];null!=b&&""!=b&&(d=b);null!=c&&""!=c&&(f=c);"undefined"!=
typeof jQuery&&jQuery(a).trigger(d,f)},VMM.getJSON=function(a,b,c){if("undefined"!=typeof jQuery){jQuery.ajaxSetup({timeout:3E3});if("Explorer"==VMM.Browser.browser&&7<=parseInt(VMM.Browser.version,10)&&window.XDomainRequest){trace("IE JSON");var d=a;if(d.match("^http://"))return jQuery.getJSON(d,b,c);if(d.match("^https://"))return d=d.replace("https://","http://"),jQuery.getJSON(d,b,c)}return jQuery.getJSON(a,b,c)}},VMM.parseJSON=function(a){if("undefined"!=typeof jQuery)return jQuery.parseJSON(a)},
VMM.appendAndGetElement=function(a,b,c,d){var f,e="",h="";null!=c&&""!=c&&(e=c);null!=d&&""!=d&&(h=d);"undefined"!=typeof jQuery&&(f=jQuery(b),f.addClass(e),f.html(h),jQuery(a).append(f));return f},VMM.Lib={init:function(){return this},hide:function(a,b){null!=b&&""!=b?"undefined"!=typeof jQuery&&jQuery(a).hide(b):"undefined"!=typeof jQuery&&jQuery(a).hide()},remove:function(a){"undefined"!=typeof jQuery&&jQuery(a).remove()},detach:function(a){"undefined"!=typeof jQuery&&jQuery(a).detach()},append:function(a,
b){"undefined"!=typeof jQuery&&jQuery(a).append(b)},prepend:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).prepend(b)},show:function(a,b){null!=b&&""!=b?"undefined"!=typeof jQuery&&jQuery(a).show(b):"undefined"!=typeof jQuery&&jQuery(a).show()},load:function(a,b,c){var d={elem:a};null!=d&&""!=d&&(d=c);"undefined"!=typeof jQuery&&jQuery(a).load(d,b)},addClass:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).addClass(b)},removeClass:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).removeClass(b)},
attr:function(a,b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&jQuery(a).attr(b,c);else if("undefined"!=typeof jQuery)return jQuery(a).attr(b)},prop:function(a,b,c){"undefined"==typeof jQuery||!/[1-9]\.[3-9].[1-9]/.test(jQuery.fn.jquery)?VMM.Lib.attribute(a,b,c):jQuery(a).prop(b,c)},attribute:function(a,b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&jQuery(a).attr(b,c);else if("undefined"!=typeof jQuery)return jQuery(a).attr(b)},visible:function(a,b){if(null!=b)"undefined"!=typeof jQuery&&
(b?jQuery(a).show(0):jQuery(a).hide(0));else if("undefined"!=typeof jQuery)return jQuery(a).is(":visible")?!0:!1},css:function(a,b,c){if(null!=c&&""!=c)"undefined"!=typeof jQuery&&jQuery(a).css(b,c);else if("undefined"!=typeof jQuery)return jQuery(a).css(b)},cssmultiple:function(a,b){if("undefined"!=typeof jQuery)return jQuery(a).css(b)},offset:function(a){var b;"undefined"!=typeof jQuery&&(b=jQuery(a).offset());return b},position:function(a){var b;"undefined"!=typeof jQuery&&(b=jQuery(a).position());
return b},width:function(a,b){if(null!=b&&""!=b)"undefined"!=typeof jQuery&&jQuery(a).width(b);else if("undefined"!=typeof jQuery)return jQuery(a).width()},height:function(a,b){if(null!=b&&""!=b)"undefined"!=typeof jQuery&&jQuery(a).height(b);else if("undefined"!=typeof jQuery)return jQuery(a).height()},toggleClass:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).toggleClass(b)},each:function(a,b){"undefined"!=typeof jQuery&&jQuery(a).each(b)},html:function(a,b){var c;if("undefined"!=typeof jQuery)return c=
jQuery(a).html();if(null!=b&&""!=b)"undefined"!=typeof jQuery&&jQuery(a).html(b);else if("undefined"!=typeof jQuery)return c=jQuery(a).html()},find:function(a,b){if("undefined"!=typeof jQuery)return jQuery(a).find(b)},stop:function(a){"undefined"!=typeof jQuery&&jQuery(a).stop()},delay_animate:function(a,b,c,d,f){"mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device?(a=Math.round(10*(c/1500))/10+"s",VMM.Lib.css(b,"-webkit-transition","all "+a+" ease"),VMM.Lib.css(b,"-moz-transition","all "+a+
" ease"),VMM.Lib.css(b,"-o-transition","all "+a+" ease"),VMM.Lib.css(b,"-ms-transition","all "+a+" ease"),VMM.Lib.css(b,"transition","all "+a+" ease"),VMM.Lib.cssmultiple(b,_att)):"undefined"!=typeof jQuery&&jQuery(b).delay(a).animate(f,{duration:c,easing:d})},animate:function(a,b,c,d,f,e){var h="easein",g=!1,j=1E3,o={};null!=b&&(j=1>b?1:Math.round(b));null!=c&&""!=c&&(h=c);null!=f&&""!=f&&(g=f);o=null!=d?d:{opacity:0};if("mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device){b=Math.round(10*
(j/1500))/10+"s";h=" cubic-bezier(0.33, 0.66, 0.66, 1)";for(x in o)Object.prototype.hasOwnProperty.call(o,x)&&(trace(x+" to "+o[x]),VMM.Lib.css(a,"-webkit-transition",x+" "+b+h),VMM.Lib.css(a,"-moz-transition",x+" "+b+h),VMM.Lib.css(a,"-o-transition",x+" "+b+h),VMM.Lib.css(a,"-ms-transition",x+" "+b+h),VMM.Lib.css(a,"transition",x+" "+b+h));VMM.Lib.cssmultiple(a,o)}else"undefined"!=typeof jQuery&&(null!=e&&""!=e?jQuery(a).animate(o,{queue:g,duration:j,easing:h,complete:e}):jQuery(a).animate(o,{queue:g,
duration:j,easing:h}))}});
"undefined"!=typeof jQuery&&(function(a){window.XDomainRequest&&a.ajaxTransport(function(b){if(b.crossDomain&&b.async){if(b.timeout){b.xdrTimeout=b.timeout;delete b.timeout}var c;return{send:function(d,f){function e(b,d,e,o){c.onload=c.onerror=c.ontimeout=a.noop;c=void 0;f(b,d,e,o)}c=new XDomainRequest;c.open(b.type,b.url);c.onload=function(){e(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)};c.onerror=function(){e(404,"Not Found")};if(b.xdrTimeout){c.ontimeout=function(){e(0,"timeout")};
c.timeout=b.xdrTimeout}c.send(b.hasContent&&b.data||null)},abort:function(){if(c){c.onerror=a.noop();c.abort()}}}}})}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,f){return jQuery.easing[jQuery.easing.def](a,b,c,d,f)},easeInExpo:function(a,b,c,d,f){return b==0?c:d*Math.pow(2,10*(b/f-1))+c},easeOutExpo:function(a,b,c,d,f){return b==f?c+d:d*(-Math.pow(2,-10*b/f)+1)+c},easeInOutExpo:function(a,b,c,d,f){return b==0?c:b==f?c+d:(b=
b/(f/2))<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInQuad:function(a,b,c,d,f){return d*(b=b/f)*b+c},easeOutQuad:function(a,b,c,d,f){return-d*(b=b/f)*(b-2)+c},easeInOutQuad:function(a,b,c,d,f){return(b=b/(f/2))<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c}}));
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Browser&&(VMM.Browser={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";this.device=this.searchDevice(navigator.userAgent);this.orientation=this.searchOrientation(window.orientation)},searchOrientation:function(a){return a==0||a==180?"portrait":
a==90||a==-90?"landscape":"normal"},searchDevice:function(a){var b="";return b=a.match(/Android/i)||a.match(/iPhone|iPod/i)?"mobile":a.match(/iPad/i)?"tablet":a.match(/BlackBerry/i)||a.match(/IEMobile/i)?"other mobile":"desktop"},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(c.indexOf(a[b].subString)!=-1)return a[b].identity}else if(d)return a[b].identity}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);
if(b!=-1)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},
{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,
subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},VMM.Browser.init());
"undefined"!=typeof VMM&&"undefined"==typeof VMM.FileExtention&&(VMM.FileExtention={googleDocType:function(a){for(var a=a.replace(/\s\s*$/,""),b="",c=["DOC","DOCX","XLS","XLSX","PPT","PPTX","PDF","PAGES","AI","PSD","TIFF","DXF","SVG","EPS","PS","TTF","XPS","ZIP","RAR"],d=false,b=a.substr(a.length-5,5),f=0;f<c.length;f++)if(b.toLowerCase().match(c[f].toString().toLowerCase())||a.match("docs.google.com"))d=true;return d}});
if("undefined"!=typeof VMM&&"undefined"==typeof VMM.Date){VMM.Date={init:function(){return this},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>mmm d',' yyyy'</small>'"},month:"January February March April May June July August September October November December".split(" "),
month_abbr:"Jan. Feb. March April May June July Aug. Sept. Oct. Nov. Dec.".split(" "),day:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),day_abbr:"Sun. Mon. Tues. Wed. Thurs. Fri. Sat.".split(" "),hour:[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],hour_suffix:["am"],bc_format:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"dddd', 'h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",
full_long:"dddd',' mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>'dddd',' mmm d',' yyyy'</small>'"},setLanguage:function(a){trace("SET DATE LANGUAGE");VMM.Date.dateformats=a.dateformats;VMM.Date.month=a.date.month;VMM.Date.month_abbr=a.date.month_abbr;VMM.Date.day=a.date.day;VMM.Date.day_abbr=a.date.day_abbr;dateFormat.i18n.dayNames=a.date.day_abbr.concat(a.date.day);dateFormat.i18n.monthNames=a.date.month_abbr.concat(a.date.month)},parse:function(a,b){var c,d,f,e={year:false,
month:false,day:false,hour:false,minute:false,second:false,millisecond:false};if(type.of(a)=="date"){trace("DEBUG THIS, ITs A DATE");c=a}else{c=new Date(0,0,1,0,0,0,0);if(a.match(/,/gi)){d=a.split(",");for(f=0;f<d.length;f++)d[f]=parseInt(d[f],10);if(d[0]){c.setFullYear(d[0]);e.year=true}if(d[1]){c.setMonth(d[1]-1);e.month=true}if(d[2]){c.setDate(d[2]);e.day=true}if(d[3]){c.setHours(d[3]);e.hour=true}if(d[4]){c.setMinutes(d[4]);e.minute=true}if(d[5]){c.setSeconds(d[5]);if(d[5]>=1)e.second=true}if(d[6]){c.setMilliseconds(d[6]);
if(d[6]>=1)e.millisecond=true}}else if(a.match("/")){if(a.match(" ")){f=a.split(" ");if(a.match(":")){d=f[1].split(":");if(d[0]>=0){c.setHours(d[0]);e.hour=true}if(d[1]>=0){c.setMinutes(d[1]);e.minute=true}if(d[2]>=0){c.setSeconds(d[2]);e.second=true}if(d[3]>=0){c.setMilliseconds(d[3]);e.millisecond=true}}d=f[0].split("/")}else d=a.split("/");if(d[2]){c.setFullYear(d[2]);e.year=true}if(d[0]>=0){c.setMonth(d[0]-1);e.month=true}if(d[1]>=0)if(d[1].length>2){c.setFullYear(d[1]);e.year=true}else{c.setDate(d[1]);
e.day=true}}else if(a.match("now")){d=new Date;c.setFullYear(d.getFullYear());e.year=true;c.setMonth(d.getMonth());e.month=true;c.setDate(d.getDate());e.day=true;if(a.match("hours")){c.setHours(d.getHours());e.hour=true}if(a.match("minutes")){c.setHours(d.getHours());c.setMinutes(d.getMinutes());e.hour=true;e.minute=true}if(a.match("seconds")){c.setHours(d.getHours());c.setMinutes(d.getMinutes());c.setSeconds(d.getSeconds());e.hour=true;e.minute=true;e.second=true}if(a.match("milliseconds")){c.setHours(d.getHours());
c.setMinutes(d.getMinutes());c.setSeconds(d.getSeconds());c.setMilliseconds(d.getMilliseconds());e.hour=true;e.minute=true;e.second=true;e.millisecond=true}}else if(a.length<=8){e.year=true;c.setFullYear(parseInt(a,10));c.setMonth(0);c.setDate(1);c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0)}else if(a.match("T"))if(navigator.userAgent.match(/MSIE\s(?!9.0)/)){f=a.split("T");if(a.match(":")){d=f[1].split(":");if(d[0]>=1){c.setHours(d[0]);e.hour=true}if(d[1]>=1){c.setMinutes(d[1]);
e.minute=true}if(d[2]>=1){c.setSeconds(d[2]);if(d[2]>=1)e.second=true}if(d[3]>=1){c.setMilliseconds(d[3]);if(d[3]>=1)e.millisecond=true}}d=f[0].split("-");if(d[0]){c.setFullYear(d[0]);e.year=true}if(d[1]>=0){c.setMonth(d[1]-1);e.month=true}if(d[2]>=0){c.setDate(d[2]);e.day=true}}else{c=new Date(Date.parse(a));e.year=true;e.month=true;e.day=true;e.hour=true;e.minute=true;if(c.getSeconds()>=1)e.second=true;if(c.getMilliseconds()>=1)e.millisecond=true}else{c=new Date(parseInt(a.slice(0,4),10),parseInt(a.slice(4,
6),10)-1,parseInt(a.slice(6,8),10),parseInt(a.slice(8,10),10),parseInt(a.slice(10,12),10));e.year=true;e.month=true;e.day=true;e.hour=true;e.minute=true;if(c.getSeconds()>=1)e.second=true;if(c.getMilliseconds()>=1)e.millisecond=true}}return b!=null&&b!=""?{date:c,precision:e}:c},prettyDate:function(a,b,c,d){var f,e,h=false,g;if(d!=null&&d!=""&&typeof d!="undefined"){h=true;trace("D2 "+d)}if(type.of(a)=="date"){b=type.of(c)=="object"?c.millisecond||c.second&&a.getSeconds()>=1?VMM.Date.dateformats.time_short:
c.minute?b?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:c.hour?b?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:c.day?b?VMM.Date.dateformats.full_short:VMM.Date.dateformats.full:c.month?b?VMM.Date.dateformats.month_short:VMM.Date.dateformats.month:VMM.Date.dateformats.year:a.getMonth()===0&&a.getDate()==1&&a.getHours()===0&&a.getMinutes()===0?VMM.Date.dateformats.year:a.getDate()<=1&&a.getHours()===0&&a.getMinutes()===
0?b?VMM.Date.dateformats.month_short:VMM.Date.dateformats.month:a.getHours()===0&&a.getMinutes()===0?b?VMM.Date.dateformats.full_short:VMM.Date.dateformats.full:a.getMinutes()===0?b?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:b?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.full_long;f=dateFormat(a,b,false);for(var a=f.split(" "),j=0;j<a.length;j++)if(parseInt(a[j],10)<0){trace("YEAR IS BC");c=a[j];g=Math.abs(parseInt(a[j],10));g=g.toString()+
" B.C.";f=f.replace(c,g)}if(h){e=dateFormat(d,b,false);a=e.split(" ");for(d=0;d<a.length;d++)if(parseInt(a[d],10)<0){trace("YEAR IS BC");c=a[d];g=Math.abs(parseInt(a[d],10));g=g.toString()+" B.C.";e=e.replace(c,g)}}}else{trace("NOT A VALID DATE?");trace(a)}return h?f+" &mdash; "+e:f}}.init();var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,
c=/[^-+\dA-Z]/g,d=function(a,b){a=""+a;for(b=b||2;a.length<b;)a="0"+a;return a};return function(f,e,h){var g=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(f)=="[object String]"&&!/\d/.test(f)){e=f;f=void 0}isNaN(f)&&trace("invalid date "+f);e=""+(g.masks[e]||e||g.masks["default"]);if(e.slice(0,4)=="UTC:"){e=e.slice(4);h=true}var j=h?"getUTC":"get",o=f[j+"Date"](),l=f[j+"Day"](),r=f[j+"Month"](),v=f[j+"FullYear"](),s=f[j+"Hours"](),A=f[j+"Minutes"](),L=f[j+"Seconds"](),j=f[j+"Milliseconds"](),
B=h?0:f.getTimezoneOffset(),J={d:o,dd:d(o),ddd:g.i18n.dayNames[l],dddd:g.i18n.dayNames[l+7],m:r+1,mm:d(r+1),mmm:g.i18n.monthNames[r],mmmm:g.i18n.monthNames[r+12],yy:(""+v).slice(2),yyyy:v,h:s%12||12,hh:d(s%12||12),H:s,HH:d(s),M:A,MM:d(A),s:L,ss:d(L),l:d(j,3),L:d(j>99?Math.round(j/10):j),t:s<12?"a":"p",tt:s<12?"am":"pm",T:s<12?"A":"P",TT:s<12?"AM":"PM",Z:h?"UTC":((""+f).match(b)||[""]).pop().replace(c,""),o:(B>0?"-":"+")+d(Math.floor(Math.abs(B)/60)*100+Math.abs(B)%60,4),S:["th","st","nd","rd"][o%
10>3?0:(o%100-o%10!=10)*o%10]};return e.replace(a,function(a){return a in J?J[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")};Date.prototype.format=function(a,b){return dateFormat(this,a,b)}}
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Util&&(VMM.Util={init:function(){return this},correctProtocol:function(a){var b=window.parent.location.protocol.toString(),c="",a=a.split("://",2),c=b.match("http")?b:"https";return c+"://"+a[1]},mergeConfig:function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},getObjectAttributeByIndex:function(a,b){if(typeof a!="undefined"){var c=0,d;for(d in a){if(b===c)return a[d];c++}}return""},ordinal:function(a){return["th",
"st","nd","rd"][!(a%10>3||Math.floor(a%100/10)==1)*(a%10)]},randomBetween:function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},average:function(a){for(var b={mean:0,variance:0,deviation:0},c=a.length,d,f=0,e=c;e--;f=f+a[e]);d=b.mean=f/c;e=c;for(f=0;e--;f=f+Math.pow(a[e]-d,2));return b.deviation=Math.sqrt(b.variance=f/c),b},customSort:function(a,b){return a==b?0:a>b?1:-1},deDupeArray:function(a){var b,c=a.length,d=[],f={};for(b=0;b<c;b++)f[a[b]]=0;for(b in f)d.push(b);return d},number2money:function(a,
b,c){b=b!==null?b:true;c=c!==null?c:false;a=this.niceNumber(VMM.Math2.floatPrecision(a,2));!a.split(/\./g)[1]&&c&&(a=a+".00");b&&(a="$"+a);return a},wordCount:function(a){var a=a+" ",b=a.replace(/^[^A-Za-z0-9\'\-]+/gi,"").replace(/[^A-Za-z0-9\'\-]+/gi," ").split(" ").length-1;a.length<2&&(b=0);return b},ratio:{fit:function(a,b,c,d){var f={width:0,height:0};f.width=a;f.height=Math.round(a/c*d);if(f.height>b){f.height=b;f.width=Math.round(b/d*c);f.width>a&&trace("FIT: DIDN'T FIT!!! ")}return f},r16_9:function(a,
b){if(a!==null&&a!=="")return Math.round(b/16*9);if(b!==null&&b!=="")return Math.round(a/9*16)},r4_3:function(a,b){if(a!==null&&a!=="")return Math.round(b/4*3);if(b!==null&&b!=="")return Math.round(a/3*4)}},doubledigit:function(a){return(a<10?"0":"")+a},truncateWords:function(a,b,c){b||(b=30);c||(c=b);for(var a=a.replace(/^[^A-Za-z0-9\'\-]+/gi,"").split(" "),d=[],b=Math.min(a.length,b),c=Math.min(a.length,c),f=0;f<b;f++)d.push(a[f]);for(;f<c;f++){b=a[f];d.push(b);if(b.charAt(b.length-1)==".")break}return d.join(" ")},
linkify:function(a){return a.replace(/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,"<a target='_blank' href='$&' onclick='void(0)'>$&</a>").replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,"$1<a target='_blank' onclick='void(0)' href='http://$2'>$2</a>").replace(/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>")},linkify_with_twitter:function(a){return a.replace(/(\()((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\))|(\[)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\])|(\{)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\})|(<|&(?:lt|#60|#x3c);)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(>|&(?:gt|#62|#x3e);)|((?:^|[^=\s'"\]])\s*['"]?|[^=\s]\s+)(\b(?:ht|f)tps?:\/\/[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]+(?:(?!&(?:gt|#0*62|#x0*3e);|&(?:amp|apos|quot|#0*3[49]|#x0*2[27]);[.!&',:?;]?(?:[^a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]|$))&[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]*)*[a-z0-9\-_~$()*+=\/#[\]@%])/img,
'$1$4$7$10$13<a href="$2$5$8$11$14" target="_blank" class="hyphenate">$2$5$8$11$14</a>$3$6$9$12').replace(/(^|[^\/])(www\.[\S]+(\b|$))/gim,"$1<a target='_blank' class='hyphenate' onclick='void(0)' href='http://$2'>$2</a>").replace(/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>").replace(/\B@([\w-]+)/gm,"<a href='http://twitter.com/$1' target='_blank' onclick='void(0)'>@$1</a>")},linkify_wikipedia:function(a){return a.replace(/<i[^>]*>(.*?)<\/i>/gim,
"<a target='_blank' href='http://en.wikipedia.org/wiki/$&' onclick='void(0)'>$&</a>").replace(/<i\b[^>]*>/gim,"").replace(/<\/i>/gim,"").replace(/<b\b[^>]*>/gim,"").replace(/<\/b>/gim,"")},unlinkify:function(a){if(!a)return a;a=a.replace(/<a\b[^>]*>/i,"");return a=a.replace(/<\/a>/i,"")},untagify:function(a){if(!a)return a;return a=a.replace(/<\s*\w.*?>/g,"")},nl2br:function(a){return a.replace(/(\r\n|[\r\n]|\\n|\\r)/g,"<br/>")},unique_ID:function(a){for(var b="",c=0;c<a;c++){var d;d="abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ".substr(Math.floor(Math.random()*
62),1);b=b+d}return b},isEven:function(a){return a%2===0?true:false},getUrlVars:function(a){var b=a.toString();b.match("&#038;")?b=b.replace("&#038;","&"):b.match("&#38;")?b=b.replace("&#38;","&"):b.match("&amp;")&&(b=b.replace("&amp;","&"));for(var a=[],c=b.slice(b.indexOf("?")+1).split("&"),d=0;d<c.length;d++){b=c[d].split("=");a.push(b[0]);a[b[0]]=b[1]}return a},toHTML:function(a){a=this.nl2br(a);a=this.linkify(a);return a.replace(/\s\s/g,"&nbsp;&nbsp;")},toCamelCase:function(a,b){b!==false&&(b=
true);for(var c=(b?a.toLowerCase():a).split(" "),d=0;d<c.length;d++)c[d]=c[d].substr(0,1).toUpperCase()+c[d].substr(1);return c.join(" ")},properQuotes:function(a){return a.replace(/\"([^\"]*)\"/gi,"&#8220;$1&#8221;")},niceNumber:function(a){x=(a+"").split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";for(a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2},toTitleCase:function(a){if(VMM.Browser.browser=="Explorer"&&parseInt(VMM.Browser.version,10)>=7)return a.replace("_","%20");var b={__smallWords:["a",
"an","and","as","at","but","by","en","for","if","in","of","on","or","the","to","v[.]?","via","vs[.]?"],init:function(){this.__smallRE=this.__smallWords.join("|");this.__lowerCaseWordsRE=RegExp("\\b("+this.__smallRE+")\\b","gi");this.__firstWordRE=RegExp("^([^a-zA-Z0-9 \\r\\n\\t]*)("+this.__smallRE+")\\b","gi");this.__lastWordRE=RegExp("\\b("+this.__smallRE+")([^a-zA-Z0-9 \\r\\n\\t]*)$","gi")},toTitleCase:function(a){for(var b="",a=a.split(/([:.;?!][ ]|(?:[ ]|^)["\u201c])/),f=0;f<a.length;++f)var e=
a[f],e=e.replace(/\b([a-zA-Z][a-z.'\u2019]*)\b/g,this.__titleCaseDottedWordReplacer),e=e.replace(this.__lowerCaseWordsRE,this.__lowerReplacer),e=e.replace(this.__firstWordRE,this.__firstToUpperCase),e=e.replace(this.__lastWordRE,this.__firstToUpperCase),b=b+e;b=b.replace(/ V(s?)\. /g," v$1. ");b=b.replace(/(['\u2019])S\b/g,"$1s");return b=b.replace(/\b(AT&T|Q&A)\b/ig,this.__upperReplacer)},__titleCaseDottedWordReplacer:function(a){return a.match(/[a-zA-Z][.][a-zA-Z]/)?a:b.__firstToUpperCase(a)},__lowerReplacer:function(a){return a.toLowerCase()},
__upperReplacer:function(a){return a.toUpperCase()},__firstToUpperCase:function(a){a=a.split(/(^[^a-zA-Z0-9]*[a-zA-Z0-9])(.*)$/);a[1]&&(a[1]=a[1].toUpperCase());return a.join("")}};b.init();a=a.replace(/_/g," ");return a=b.toTitleCase(a)}}.init());LoadLib=function(){function a(a){for(var d=0,f=false,d=0;d<b.length;d++)b[d]==a&&(f=true);if(f)return true;b.push(a);return false}var b=[];return{css:function(b,d,f,e){a(b)||LazyLoad.css(b,d,f,e)},js:function(b,d,f,e){a(b)||LazyLoad.js(b,d,f,e)}}}(this.document);
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Language&&(VMM.Language={lang:"en",api:{wikipedia:"en"},date:{month:"January February March April May June July August September October November December".split(" "),month_abbr:"Jan. Feb. March April May June July Aug. Sept. Oct. Nov. Dec.".split(" "),day:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),day_abbr:"Sun. Mon. Tues. Wed. Thurs. Fri. Sat.".split(" ")},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",
full:"mmmm d',' yyyy",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT'<br/><small>mmm d',' yyyy'</small>'"},messages:{loading_timeline:"Loading Timeline... ",return_to_title:"Return to Title",expand_timeline:"Expand Timeline",contract_timeline:"Contract Timeline",wikipedia:"From Wikipedia, the free encyclopedia",loading_content:"Loading Content",loading:"Loading"}});
"undefined"!=typeof VMM&&"undefined"==typeof VMM.ExternalAPI&&(VMM.ExternalAPI={keys:{google:"",flickr:"",twitter:""},keys_master:{vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"jwNGnYw4hE9lmAez4ll0QD+jo6SKBJFknkopLS4FrSAuGfIwyj57AusuR0s8dAo=",twitter:""},init:function(){return this},setKeys:function(a){VMM.ExternalAPI.keys=a},pushQues:function(){VMM.master_config.googlemaps.active&&VMM.ExternalAPI.googlemaps.pushQue();
VMM.master_config.youtube.active&&VMM.ExternalAPI.youtube.pushQue();VMM.master_config.soundcloud.active&&VMM.ExternalAPI.soundcloud.pushQue();VMM.master_config.googledocs.active&&VMM.ExternalAPI.googledocs.pushQue();VMM.master_config.googleplus.active&&VMM.ExternalAPI.googleplus.pushQue();VMM.master_config.wikipedia.active&&VMM.ExternalAPI.wikipedia.pushQue();VMM.master_config.vimeo.active&&VMM.ExternalAPI.vimeo.pushQue();VMM.master_config.vine.active&&VMM.ExternalAPI.vine.pushQue();VMM.master_config.twitter.active&&
VMM.ExternalAPI.twitter.pushQue();VMM.master_config.flickr.active&&VMM.ExternalAPI.flickr.pushQue();VMM.master_config.webthumb.active&&VMM.ExternalAPI.webthumb.pushQue()},twitter:{tweetArray:[],get:function(a){VMM.master_config.twitter.que.push({mid:a.id,id:a.uid});VMM.master_config.twitter.active=true},create:function(a,b){VMM.ExternalAPI.twitter.getOEmbed(a,b)},errorTimeOut:function(a){trace("TWITTER JSON ERROR TIMEOUT "+a.mid);VMM.attachElement("#"+a.id.toString(),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+
a.mid));VMM.getJSON("http://api.twitter.com/1/account/rate_limit_status.json",function(b){trace("REMAINING TWITTER API CALLS "+b.remaining_hits);trace("TWITTER RATE LIMIT WILL RESET AT "+b.reset_time);var c="",c=b.remaining_hits==0?"<p>You've reached the maximum number of tweets you can load in an hour.</p>"+("<p>You can view tweets again starting at: <br/>"+b.reset_time+"</p>"):"<p>Still waiting on Twitter. "+a.mid+"</p>";VMM.attachElement("#"+a.id.toString(),VMM.MediaElement.loadingmessage(c))})},
errorTimeOutOembed:function(a){trace("TWITTER JSON ERROR TIMEOUT "+a.mid);VMM.attachElement("#"+a.id.toString(),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+a.mid))},pushQue:function(){if(VMM.master_config.twitter.que.length>0){VMM.ExternalAPI.twitter.create(VMM.master_config.twitter.que[0],VMM.ExternalAPI.twitter.pushQue);VMM.master_config.twitter.que.remove(0)}},getOEmbed:function(a,b){var c="http://api.twitter.com/1/statuses/oembed.json?id="+a.mid+"&omit_script=true&include_entities=true&callback=?",
d=setTimeout(VMM.ExternalAPI.twitter.errorTimeOutOembed,VMM.master_config.timers.api,a);VMM.getJSON(c,function(b){var c,d="";c=""+(b.html.split("</p>&mdash;")[0]+"</p></blockquote>");d=b.author_url.split("twitter.com/")[1];c=c+"<div class='vcard author'>"+("<a class='screen-name url' href='"+b.author_url+"' target='_blank'>");c=c+"<span class='avatar'></span>"+("<span class='fn'>"+b.author_name+"</span>");VMM.attachElement("#"+a.id.toString(),c+("<span class='nickname'>@"+d+"<span class='thumbnail-inline'></span></span>")+
"</a></div>");VMM.attachElement("#text_thumb_"+a.id.toString(),b.html);VMM.attachElement("#marker_content_"+a.id.toString(),b.html)}).error(function(b,c){trace("TWITTER error");trace("TWITTER ERROR: "+c+" "+b.responseText);clearTimeout(d);VMM.attachElement("#"+a.id,VMM.MediaElement.loadingmessage("ERROR LOADING TWEET "+a.mid))}).success(function(){clearTimeout(d);clearTimeout(callback_timeout);b()})},getHTML:function(a){VMM.getJSON("http://api.twitter.com/1/statuses/oembed.json?id="+a+"&omit_script=true&include_entities=true&callback=?",
VMM.ExternalAPI.twitter.onJSONLoaded)},onJSONLoaded:function(a){trace("TWITTER JSON LOADED");VMM.attachElement("#"+a.id,VMM.Util.linkify_with_twitter(a.html))},parseTwitterDate:function(a){return new Date(Date.parse(a))},prettyParseTwitterDate:function(a){a=new Date(Date.parse(a));return VMM.Date.prettyDate(a,true)},getTweets:function(a){for(var b=[],c=a.length,d=0;d<a.length;d++){var f="",f=a[d].tweet.match("status/")?a[d].tweet.split("status/")[1]:a[d].tweet.match("statuses/")?a[d].tweet.split("statuses/")[1]:
"";VMM.getJSON("http://api.twitter.com/1/statuses/show.json?id="+f+"&include_entities=true&callback=?",function(a){var d={},f="<div class='twitter'><blockquote><p>",j=VMM.Util.linkify_with_twitter(a.text,"_blank"),f=f+j+"</p>"+("\u2014 "+a.user.name+" (<a href='https://twitter.com/"+a.user.screen_name+"'>@"+a.user.screen_name+"</a>) <a href='https://twitter.com/"+a.user.screen_name+"/status/"+a.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(a.created_at)+" </a></blockquote></div>");d.content=
f;d.raw=a;b.push(d);b.length==c&&VMM.fireEvent(global,"TWEETSLOADED",{tweetdata:b})}).success(function(){trace("second success")}).error(function(){trace("error")}).complete(function(){trace("complete")})}},getTweetSearch:function(a,b){var c=40;b!=null&&b!=""&&(c=b);var d=[];VMM.getJSON("http://search.twitter.com/search.json?q="+a+"&rpp="+c+"&include_entities=true&result_type=mixed",function(a){for(var b=0;b<a.results.length;b++){var c={},g="<div class='twitter'><blockquote><p>",j=VMM.Util.linkify_with_twitter(a.results[b].text,
"_blank"),g=g+j,g=g+"</p>",g=g+("\u2014 "+a.results[b].from_user_name+" (<a href='https://twitter.com/"+a.results[b].from_user+"'>@"+a.results[b].from_user+"</a>) <a href='https://twitter.com/"+a.results[b].from_user+"/status/"+a.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(a.results[b].created_at)+" </a></blockquote></div>");c.content=g;c.raw=a.results[b];d.push(c)}VMM.fireEvent(global,"TWEETSLOADED",{tweetdata:d})})},prettyHTML:function(a,b){var a=a.toString(),c="http://api.twitter.com/1/statuses/show.json?id="+
a+"&include_entities=true&callback=?",d=setTimeout(VMM.ExternalAPI.twitter.errorTimeOut,VMM.master_config.timers.api,a);VMM.getJSON(c,VMM.ExternalAPI.twitter.formatJSON).error(function(b,c){trace("TWITTER error");trace("TWITTER ERROR: "+c+" "+b.responseText);VMM.attachElement("#twitter_"+a,"<p>ERROR LOADING TWEET "+a+"</p>")}).success(function(a){clearTimeout(d);b&&VMM.ExternalAPI.twitter.secondaryMedia(a)})},formatJSON:function(a){var b=a.id_str,c="<blockquote><p>",d=VMM.Util.linkify_with_twitter(a.text,
"_blank"),c=c+d+"</p></blockquote><div class='vcard author'>"+("<a class='screen-name url' href='https://twitter.com/"+a.user.screen_name+"' data-screen-name='"+a.user.screen_name+"' target='_blank'>"),c=c+("<span class='avatar'><img src=' "+a.user.profile_image_url+"'  alt=''></span>"),c=c+("<span class='fn'>"+a.user.name+"</span>"),c=c+("<span class='nickname'>@"+a.user.screen_name+"<span class='thumbnail-inline'></span></span>"),c=c+"</a></div>";typeof a.entities.media!="undefined"&&a.entities.media[0].type==
"photo"&&(c=c+("<img src=' "+a.entities.media[0].media_url+"'  alt=''>"));VMM.attachElement("#twitter_"+b.toString(),c);VMM.attachElement("#text_thumb_"+b.toString(),a.text)}},googlemaps:{maptype:"toner",setMapType:function(a){if(a!="")VMM.ExternalAPI.googlemaps.maptype=a},get:function(a){var b;a.vars=VMM.Util.getUrlVars(a.id);b="http://maps.googleapis.com/maps/api/js?key="+(VMM.ExternalAPI.keys.google!=""?VMM.ExternalAPI.keys.google:Aes.Ctr.decrypt(VMM.ExternalAPI.keys_master.google,VMM.ExternalAPI.keys_master.vp,
256))+"&v=3.9&libraries=places&sensor=false&callback=VMM.ExternalAPI.googlemaps.onMapAPIReady";if(VMM.master_config.googlemaps.active)VMM.master_config.googlemaps.que.push(a);else{VMM.master_config.googlemaps.que.push(a);VMM.master_config.googlemaps.api_loaded||LoadLib.js(b,function(){trace("Google Maps API Library Loaded")})}},create:function(a){VMM.ExternalAPI.googlemaps.createAPIMap(a)},createiFrameMap:function(a){var b=a.id+"&output=embed",c;c=""+("<div class='google-map' id='"+(a.uid.toString()+
"_gmap")+"' style='width=100%;height=100%;'>");VMM.attachElement("#"+a.uid,c+("<iframe width='100%' height='100%' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' src='"+b+"'></iframe>")+"</div>")},createAPIMap:function(a){function b(a){if(a in VMM.ExternalAPI.googlemaps.map_providers){e=VMM.ExternalAPI.googlemaps.map_attribution[VMM.ExternalAPI.googlemaps.map_providers[a].attribution];return VMM.ExternalAPI.googlemaps.map_providers[a]}if(VMM.ExternalAPI.googlemaps.defaultType(a)){trace("GOOGLE MAP DEFAULT TYPE");
return google.maps.MapTypeId[a.toUpperCase()]}trace("Not a maptype: "+a)}function c(){var b=new google.maps.Geocoder,c=VMM.Util.getUrlVars(a.id).q;if(c.match("loc:")){var e=c.split(":")[1].split("+");l=new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1]));v=true}b.geocode({address:c},function(a,b){if(b==google.maps.GeocoderStatus.OK){new google.maps.Marker({map:g,position:a[0].geometry.location});typeof a[0].geometry.viewport!="undefined"?g.fitBounds(a[0].geometry.viewport):typeof a[0].geometry.bounds!=
"undefined"?g.fitBounds(a[0].geometry.bounds):g.setCenter(a[0].geometry.location);v&&g.panTo(l);s&&g.setZoom(r)}else{trace("Geocode for "+c+" was not successful for the following reason: "+b);trace("TRYING PLACES SEARCH");v&&g.panTo(l);s&&g.setZoom(r);d()}})}function d(){var b,c,d;place_search=new google.maps.places.PlacesService(g);new google.maps.InfoWindow;b={query:"",types:["country","neighborhood","political","locality","geocode"]};if(type.of(VMM.Util.getUrlVars(a.id).q)=="string")b.query=VMM.Util.getUrlVars(a.id).q;
if(v){b.location=l;b.radius="15000"}else{c=new google.maps.LatLng(-89.999999,-179.999999);d=new google.maps.LatLng(89.999999,179.999999);new google.maps.LatLngBounds(c,d)}place_search.textSearch(b,function(c,d){if(d==google.maps.places.PlacesServiceStatus.OK){for(var e=0;e<c.length;e++);if(v)g.panTo(l);else if(c.length>=1){g.panTo(c[0].geometry.location);s&&g.setZoom(r)}}else{trace("Place search for "+b.query+" was not successful for the following reason: "+d);trace("YOU MAY NEED A GOOGLE MAPS API KEY IN ORDER TO USE THIS FEATURE OF TIMELINEJS");
trace("FIND OUT HOW TO GET YOUR KEY HERE: https://developers.google.com/places/documentation/#Authentication");if(v){g.panTo(l);s&&g.setZoom(r)}else{trace("USING SIMPLE IFRAME MAP EMBED");if(a.id[0].match("https"))a.id=a.url[0].replace("https","http");VMM.ExternalAPI.googlemaps.createiFrameMap(a)}}})}function f(){var b,c,d,e;b=a.id+"&output=kml";b=b.replace("&output=embed","");c=new google.maps.KmlLayer(b,{preserveViewport:true});d=new google.maps.InfoWindow;c.setMap(g);google.maps.event.addListenerOnce(c,
"defaultviewport_changed",function(){v?g.panTo(l):g.fitBounds(c.getDefaultViewport());s&&g.setZoom(r)});google.maps.event.addListener(c,"click",function(a){e=a.featureData.description;d.setContent(e);d.open(g)})}var e="",h,g,j,o=a.uid.toString()+"_gmap",l=new google.maps.LatLng(41.875696,-87.624207),r=11,v=false,s=false;google.maps.VeriteMapType=function(a){if(VMM.ExternalAPI.googlemaps.defaultType(a))return google.maps.MapTypeId[a.toUpperCase()];var c=b(a);return google.maps.ImageMapType.call(this,
{getTileUrl:function(a,b){return[c.url.replace("{S}",VMM.ExternalAPI.googlemaps.map_subdomains[(b+a.x+a.y)%VMM.ExternalAPI.googlemaps.map_subdomains.length]).replace("{Z}",b).replace("{X}",a.x).replace("{Y}",a.y).replace("{z}",b).replace("{x}",a.x).replace("{y}",a.y)]},tileSize:new google.maps.Size(256,256),name:a,minZoom:c.minZoom,maxZoom:c.maxZoom})};google.maps.VeriteMapType.prototype=new google.maps.ImageMapType("_");h=VMM.ExternalAPI.googlemaps.maptype!=""?VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)?
google.maps.MapTypeId[VMM.ExternalAPI.googlemaps.maptype.toUpperCase()]:VMM.ExternalAPI.googlemaps.maptype:"toner";if(type.of(VMM.Util.getUrlVars(a.id).ll)=="string"){v=true;j=VMM.Util.getUrlVars(a.id).ll.split(",");l=new google.maps.LatLng(parseFloat(j[0]),parseFloat(j[1]))}else if(type.of(VMM.Util.getUrlVars(a.id).sll)=="string"){j=VMM.Util.getUrlVars(a.id).sll.split(",");l=new google.maps.LatLng(parseFloat(j[0]),parseFloat(j[1]))}if(type.of(VMM.Util.getUrlVars(a.id).z)=="string"){s=true;r=parseFloat(VMM.Util.getUrlVars(a.id).z)}j=
{zoom:r,draggable:false,disableDefaultUI:true,mapTypeControl:false,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},center:l,mapTypeId:h,mapTypeControlOptions:{mapTypeIds:[h]}};VMM.attachElement("#"+a.uid,"<div class='google-map' id='"+o+"' style='width=100%;height=100%;'></div>");g=new google.maps.Map(document.getElementById(o),j);if(!VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)){g.mapTypes.set(h,
new google.maps.VeriteMapType(h));VMM.appendElement("#"+o,"<div class='map-attribution'><div class='attribution-text'>"+e+"</div></div>")}type.of(VMM.Util.getUrlVars(a.id).msid)=="string"?f():type.of(VMM.Util.getUrlVars(a.id).q)=="string"&&c()},pushQue:function(){for(var a=0;a<VMM.master_config.googlemaps.que.length;a++)VMM.ExternalAPI.googlemaps.create(VMM.master_config.googlemaps.que[a]);VMM.master_config.googlemaps.que=[]},onMapAPIReady:function(){VMM.master_config.googlemaps.map_active=true;VMM.master_config.googlemaps.places_active=
true;VMM.ExternalAPI.googlemaps.onAPIReady()},onPlacesAPIReady:function(){VMM.master_config.googlemaps.places_active=true;VMM.ExternalAPI.googlemaps.onAPIReady()},onAPIReady:function(){if(!VMM.master_config.googlemaps.active&&VMM.master_config.googlemaps.map_active&&VMM.master_config.googlemaps.places_active){VMM.master_config.googlemaps.active=true;VMM.ExternalAPI.googlemaps.pushQue()}},defaultType:function(a){return a.toLowerCase()=="satellite"||a.toLowerCase()=="hybrid"||a.toLowerCase()=="terrain"||
a.toLowerCase()=="roadmap"?true:false},map_subdomains:["","a.","b.","c.","d."],map_attribution:{stamen:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://creativecommons.org/licenses/by-sa/3.0'>CC BY SA</a>.",apple:"Map data &copy; 2012  Apple, Imagery &copy; 2012 Apple"},map_providers:{toner:{url:"http://{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",
minZoom:0,maxZoom:20,attribution:"stamen"},"toner-lines":{url:"http://{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-labels":{url:"http://{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},sterrain:{url:"http://{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:20,attribution:"stamen"},apple:{url:"http://gsp2.apple.com/tile?api=1&style=slideshow&layers=default&lang=en_US&z={z}&x={x}&y={y}&v=9",minZoom:4,
maxZoom:14,attribution:"apple"},watercolor:{url:"http://{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16,attribution:"stamen"}}},googleplus:{get:function(a){VMM.master_config.googleplus.que.push({user:a.user,activity:a.id,id:a.uid});VMM.master_config.googleplus.active=true},create:function(a,b){var c="",d="",f="",e="",h="",g,j;googleplus_timeout=setTimeout(VMM.ExternalAPI.googleplus.errorTimeOut,VMM.master_config.timers.api,a);callback_timeout=setTimeout(b,VMM.master_config.timers.api,
a);d=VMM.master_config.Timeline.api_keys.google!=""?VMM.master_config.Timeline.api_keys.google:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.google,VMM.master_config.vp,256);g="https://www.googleapis.com/plus/v1/people/"+a.user+"/activities/public?alt=json&maxResults=100&fields=items(id,url)&key="+d;c="GOOGLE PLUS API CALL";VMM.getJSON(g,function(b){for(var g=0;g<b.items.length;g++){trace("loop");if(b.items[g].url.split("posts/")[1]==a.activity){trace("FOUND IT!!");f=b.items[g].id;j="https://www.googleapis.com/plus/v1/activities/"+
f+"?alt=json&key="+d;VMM.getJSON(j,function(b){trace(b);typeof b.annotation!="undefined"&&(e=e+("<div class='googleplus-annotation'>'"+b.annotation+"</div>"));e=e+b.object.content;if(typeof b.object.attachments!="undefined"){for(var d=0;d<b.object.attachments.length;d++){if(b.object.attachments[d].objectType=="photo")h="<a href='"+b.object.url+"' target='_blank'><img src='"+b.object.attachments[d].image.url+"' class='article-thumb'></a>"+h;else if(b.object.attachments[d].objectType=="video"){h="<img src='"+
b.object.attachments[d].image.url+"' class='article-thumb'>"+h;h=h+"<div>";h=h+("<a href='"+b.object.attachments[d].url+"' target='_blank'>");h=h+("<h5>"+b.object.attachments[d].displayName+"</h5>");h=h+"</a>";h=h+"</div>"}else if(b.object.attachments[d].objectType=="article"){h=h+"<div>";h=h+("<a href='"+b.object.attachments[d].url+"' target='_blank'>");h=h+("<h5>"+b.object.attachments[d].displayName+"</h5>");h=h+("<p>"+b.object.attachments[d].content+"</p>");h=h+"</a>";h=h+"</div>"}trace(b.object.attachments[d])}h=
"<div class='googleplus-attachments'>"+h+"</div>"}c="<div class='googleplus-content'>"+e+h+"</div>";c=c+("<div class='vcard author'><a class='screen-name url' href='"+b.url+"' target='_blank'>");c=c+("<span class='avatar'><img src='"+b.actor.image.url+"' style='max-width: 32px; max-height: 32px;'></span>");c=c+("<span class='fn'>"+b.actor.displayName+"</span>");c=c+"<span class='nickname'><span class='thumbnail-inline'></span></span>";c=c+"</a></div>";VMM.attachElement("#googleplus_"+a.activity,c)});
break}}}).error(function(b){b=VMM.parseJSON(b.responseText);trace(b.error.message);VMM.attachElement("#googleplus_"+a.activity,VMM.MediaElement.loadingmessage("<p>ERROR LOADING GOOGLE+ </p><p>"+b.error.message+"</p>"))}).success(function(){clearTimeout(googleplus_timeout);clearTimeout(callback_timeout);b()})},pushQue:function(){if(VMM.master_config.googleplus.que.length>0){VMM.ExternalAPI.googleplus.create(VMM.master_config.googleplus.que[0],VMM.ExternalAPI.googleplus.pushQue);VMM.master_config.googleplus.que.remove(0)}},
errorTimeOut:function(a){trace("GOOGLE+ JSON ERROR TIMEOUT "+a.activity);VMM.attachElement("#googleplus_"+a.activity,VMM.MediaElement.loadingmessage("<p>Still waiting on GOOGLE+ </p><p>"+a.activity+"</p>"))}},googledocs:{get:function(a){VMM.master_config.googledocs.que.push(a);VMM.master_config.googledocs.active=true},create:function(a){var b="",b=a.id.match(/docs.google.com/i)?"<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+a.id+"&amp;embedded=true'></iframe>":"<iframe class='doc' frameborder='0' width='100%' height='100%' src='http://docs.google.com/viewer?url="+
a.id+"&amp;embedded=true'></iframe>";VMM.attachElement("#"+a.uid,b)},pushQue:function(){for(var a=0;a<VMM.master_config.googledocs.que.length;a++)VMM.ExternalAPI.googledocs.create(VMM.master_config.googledocs.que[a]);VMM.master_config.googledocs.que=[]}},flickr:{get:function(a){VMM.master_config.flickr.que.push(a);VMM.master_config.flickr.active=true},create:function(a,b){var c,d=setTimeout(b,VMM.master_config.timers.api,a);c=typeof VMM.master_config.Timeline!="undefined"&&VMM.master_config.Timeline.api_keys.flickr!=
""?VMM.master_config.Timeline.api_keys.flickr:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.flickr,VMM.master_config.vp,256);VMM.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+c+"&photo_id="+a.id+"&format=json&jsoncallback=?",function(b){b.sizes.size[0].url.split("photos/")[1].split("/");for(var c="#"+a.uid,d="#"+a.uid+"_thumb",g,j=false,o="Large",o=VMM.ExternalAPI.flickr.sizes(VMM.master_config.sizes.api.height),l=0;l<b.sizes.size.length;l++)if(b.sizes.size[l].label==
o){j=true;g=b.sizes.size[l].source}if(!j)g=b.sizes.size[b.sizes.size.length-2].source;b=b.sizes.size[0].source;VMM.Lib.attr(c,"src",g);VMM.attachElement(d,"<img src='"+b+"'>")}).error(function(a,b){trace("FLICKR error");trace("FLICKR ERROR: "+b+" "+a.responseText)}).success(function(){clearTimeout(d);b()})},pushQue:function(){if(VMM.master_config.flickr.que.length>0){VMM.ExternalAPI.flickr.create(VMM.master_config.flickr.que[0],VMM.ExternalAPI.flickr.pushQue);VMM.master_config.flickr.que.remove(0)}},
sizes:function(a){return a<=75?"Thumbnail":a<=180?"Small":a<=240?"Small 320":a<=375?"Medium":a<=480?"Medium 640":"Large"}},instagram:{get:function(a,b){return b?"http://instagr.am/p/"+a.id+"/media/?size=t":"http://instagr.am/p/"+a.id+"/media/?size="+VMM.ExternalAPI.instagram.sizes(VMM.master_config.sizes.api.height)},sizes:function(a){return a<=150?"t":a<=306?"m":"l"}},soundcloud:{get:function(a){VMM.master_config.soundcloud.que.push(a);VMM.master_config.soundcloud.active=true},create:function(a,
b){VMM.getJSON("http://soundcloud.com/oembed?url="+a.id+"&format=js&callback=?",function(c){VMM.attachElement("#"+a.uid,c.html);b()})},pushQue:function(){if(VMM.master_config.soundcloud.que.length>0){VMM.ExternalAPI.soundcloud.create(VMM.master_config.soundcloud.que[0],VMM.ExternalAPI.soundcloud.pushQue);VMM.master_config.soundcloud.que.remove(0)}}},wikipedia:{get:function(a){VMM.master_config.wikipedia.que.push(a);VMM.master_config.wikipedia.active=true},create:function(a,b){var c="http://"+a.lang+
".wikipedia.org/w/api.php?action=query&prop=extracts&redirects=&titles="+a.id+"&exintro=1&format=json&callback=?";callback_timeout=setTimeout(b,VMM.master_config.timers.api,a);if(VMM.Browser.browser=="Explorer"&&parseInt(VMM.Browser.version,10)>=7&&window.XDomainRequest){var d="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+a.id+"' target='_blank'>"+a.url+"</a></h4>",d=d+("<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>");VMM.attachElement("#"+
a.uid,d+"<p>Wikipedia entry unable to load using Internet Explorer 8 or below.</p>")}VMM.getJSON(c,function(b){if(b.query){var c,d="",g="",d=[];c=VMM.Util.getObjectAttributeByIndex(b.query.pages,0).extract;b=VMM.Util.getObjectAttributeByIndex(b.query.pages,0).title;c.match("<p>")?d=c.split("<p>"):d.push(c);for(var j=0;j<d.length;j++)j+1<=1&&j+1<d.length&&(g=g+("<p>"+d[j+1]));d="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+b+"' target='_blank'>"+b+"</a></h4>";
d=d+("<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>");d=d+VMM.Util.linkify_wikipedia(g);c.match("REDIRECT")||VMM.attachElement("#"+a.uid,d)}}).error(function(c,d,h){trace("WIKIPEDIA error");trace("WIKIPEDIA ERROR: "+d+" "+c.responseText);trace(h);VMM.attachElement("#"+a.uid,VMM.MediaElement.loadingmessage("<p>Wikipedia is not responding</p>"));clearTimeout(callback_timeout);if(VMM.master_config.wikipedia.tries<4){trace("WIKIPEDIA ATTEMPT "+VMM.master_config.wikipedia.tries);
trace(a);VMM.master_config.wikipedia.tries++;VMM.ExternalAPI.wikipedia.create(a,b)}else b()}).success(function(){VMM.master_config.wikipedia.tries=0;clearTimeout(callback_timeout);b()})},pushQue:function(){if(VMM.master_config.wikipedia.que.length>0){trace("WIKIPEDIA PUSH QUE "+VMM.master_config.wikipedia.que.length);VMM.ExternalAPI.wikipedia.create(VMM.master_config.wikipedia.que[0],VMM.ExternalAPI.wikipedia.pushQue);VMM.master_config.wikipedia.que.remove(0)}}},youtube:{get:function(a){var b="http://gdata.youtube.com/feeds/api/videos/"+
a.id+"?v=2&alt=jsonc&callback=?";VMM.master_config.youtube.que.push(a);VMM.master_config.youtube.active||VMM.master_config.youtube.api_loaded||LoadLib.js("http://www.youtube.com/player_api",function(){trace("YouTube API Library Loaded")});VMM.getJSON(b,function(b){VMM.ExternalAPI.youtube.createThumb(b,a)})},create:function(a){if(typeof a.start!="undefined"){var b=a.start.toString(),c=0,d=0;if(b.match("m")){c=parseInt(b.split("m")[0],10);d=parseInt(b.split("m")[1].split("s")[0],10);a.start=c*60+d}else a.start=
0}else a.start=0;b={active:false,player:{},name:a.uid,playing:false,hd:false};if(typeof a.hd!="undefined")b.hd=true;b.player[a.id]=new YT.Player(a.uid,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",start:a.start,rel:0},videoId:a.id,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}});VMM.master_config.youtube.array.push(b)},createThumb:function(a,b){trace("CREATE THUMB");trace(a);trace(b);typeof a.data!=
"undefined"&&VMM.attachElement("#"+b.uid+"_thumb","<img src='"+a.data.thumbnail.sqDefault+"'>")},pushQue:function(){for(var a=0;a<VMM.master_config.youtube.que.length;a++)VMM.ExternalAPI.youtube.create(VMM.master_config.youtube.que[a]);VMM.master_config.youtube.que=[]},onAPIReady:function(){VMM.master_config.youtube.active=true;VMM.ExternalAPI.youtube.pushQue()},stopPlayers:function(){for(var a=0;a<VMM.master_config.youtube.array.length;a++)VMM.master_config.youtube.array[a].playing&&VMM.master_config.youtube.array[a].player[VMM.master_config.youtube.array[a].name].stopVideo()},
onStateChange:function(a){for(var b=0;b<VMM.master_config.youtube.array.length;b++)if(VMM.master_config.youtube.array[b].player[VMM.master_config.youtube.array[b].name]==a.target&&a.data==YT.PlayerState.PLAYING){VMM.master_config.youtube.array[b].playing=true;trace(VMM.master_config.youtube.array[b].hd)}},onPlayerReady:function(){}},vimeo:{get:function(a){VMM.master_config.vimeo.que.push(a);VMM.master_config.vimeo.active=true},create:function(a,b){trace("VIMEO CREATE");var c="http://player.vimeo.com/video/"+
a.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff";VMM.getJSON("http://vimeo.com/api/v2/video/"+a.id+".json",function(c){VMM.ExternalAPI.vimeo.createThumb(c,a);b()});VMM.attachElement("#"+a.uid,"<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+c+"'></iframe>")},createThumb:function(a,b){trace("VIMEO CREATE THUMB");VMM.attachElement("#"+b.uid+"_thumb","<img src='"+a[0].thumbnail_small+"'>")},pushQue:function(){if(VMM.master_config.vimeo.que.length>0){VMM.ExternalAPI.vimeo.create(VMM.master_config.vimeo.que[0],
VMM.ExternalAPI.vimeo.pushQue);VMM.master_config.vimeo.que.remove(0)}}},vine:{get:function(a){VMM.master_config.vine.que.push(a);VMM.master_config.vine.active=true},create:function(a){trace("VINE CREATE");VMM.attachElement("#"+a.uid,"<iframe frameborder='0' width='100%' height='100%' src='"+("https://vine.co/v/"+a.id+"/embed/simple")+"'></iframe><script async src='http://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>")},pushQue:function(){if(VMM.master_config.vine.que.length>
0){VMM.ExternalAPI.vine.create(VMM.master_config.vine.que[0],VMM.ExternalAPI.vine.pushQue);VMM.master_config.vine.que.remove(0)}}},webthumb:{get:function(a){VMM.master_config.webthumb.que.push(a);VMM.master_config.webthumb.active=true},sizes:function(a){return a<=150?"t":a<=306?"m":"l"},create:function(a){trace("WEB THUMB CREATE");url=a.id.replace("http://","");VMM.attachElement("#"+a.uid,"<a href='"+a.id+"' target='_blank'><img src='http://free.pagepeeker.com/v2/thumbs.php?size=x&url="+url+"'></a>");
VMM.attachElement("#"+a.uid+"_thumb","<img src='http://free.pagepeeker.com/v2/thumbs.php?size=t&url="+url+"'>")},pushQue:function(){for(var a=0;a<VMM.master_config.webthumb.que.length;a++)VMM.ExternalAPI.webthumb.create(VMM.master_config.webthumb.que[a]);VMM.master_config.webthumb.que=[]}}}.init());function onYouTubePlayerAPIReady(){trace("GLOBAL YOUTUBE API CALLED");VMM.ExternalAPI.youtube.onAPIReady()}
"undefined"!=typeof VMM&&"undefined"==typeof VMM.MediaElement&&(VMM.MediaElement={init:function(){return this},loadingmessage:function(a){return"<div class='vco-loading'><div class='vco-loading-container'><div class='vco-loading-icon'></div><div class='vco-message'><p>"+a+"</p></div></div></div>"},thumbnail:function(a,b,c,d){if(a.media!=null&&a.media!=""){b="";b=VMM.MediaType(a.media);if(a.thumbnail!=null&&a.thumbnail!=""){trace("CUSTOM THUMB");b="<div class='thumbnail thumb-custom' id='"+d+"_custom_thumb'><img src='"+
a.thumbnail+"'></div>"}else b=b.type=="image"?"<div class='thumbnail thumb-photo'></div>":b.type=="flickr"?"<div class='thumbnail thumb-photo' id='"+d+"_thumb'></div>":b.type=="instagram"?"<div class='thumbnail thumb-instagram' id='"+d+"_thumb'><img src='"+VMM.ExternalAPI.instagram.get(b.id,true)+"'></div>":b.type=="youtube"?"<div class='thumbnail thumb-youtube' id='"+d+"_thumb'></div>":b.type=="googledoc"?"<div class='thumbnail thumb-document'></div>":b.type=="vimeo"?"<div class='thumbnail thumb-vimeo' id='"+
d+"_thumb'></div>":b.type=="vine"?"<div class='thumbnail thumb-vine'></div>":b.type=="dailymotion"?"<div class='thumbnail thumb-video'></div>":b.type=="twitter"?"<div class='thumbnail thumb-twitter'></div>":b.type=="twitter-ready"?"<div class='thumbnail thumb-twitter'></div>":b.type=="soundcloud"?"<div class='thumbnail thumb-audio'></div>":b.type=="google-map"?"<div class='thumbnail thumb-map'></div>":b.type=="googleplus"?"<div class='thumbnail thumb-googleplus'></div>":b.type=="wikipedia"?"<div class='thumbnail thumb-wikipedia'></div>":
b.type=="storify"?"<div class='thumbnail thumb-storify'></div>":b.type=="quote"?"<div class='thumbnail thumb-quote'></div>":b.type=="iframe"?"<div class='thumbnail thumb-video'></div>":b.type=="unknown"?b.id.match("blockquote")?"<div class='thumbnail thumb-quote'></div>":"<div class='thumbnail thumb-plaintext'></div>":b.type=="website"?"<div class='thumbnail thumb-website' id='"+d+"_thumb'></div>":"<div class='thumbnail thumb-plaintext'></div>";return b}},create:function(a,b){var c=VMM.MediaElement.loadingmessage(VMM.master_config.language.messages.loading+
"...");if(a.media!=null&&a.media!=""){var d="",f="",e="",h="",h=false,g;g=VMM.MediaType(a.media);g.uid=b;a.credit!=null&&a.credit!=""&&(e="<div class='credit'>"+VMM.Util.linkify_with_twitter(a.credit,"_blank")+"</div>");a.caption!=null&&a.caption!=""&&(f="<div class='caption'>"+VMM.Util.linkify_with_twitter(a.caption,"_blank")+"</div>");if(g.type=="image"){if(g.id.match("https://"))g.id=g.id.replace("https://","http://");d="<div class='media-image media-shadow'><img src='"+g.id+"' class='media-image'></div>"}else if(g.type==
"flickr"){d="<div class='media-image media-shadow'><a href='"+g.link+"' target='_blank'><img id='"+b+"'></a></div>";VMM.ExternalAPI.flickr.get(g)}else if(g.type=="instagram")d="<div class='media-image media-shadow'><a href='"+g.link+"' target='_blank'><img src='"+VMM.ExternalAPI.instagram.get(g)+"'></a></div>";else if(g.type=="googledoc"){d="<div class='media-frame media-shadow doc' id='"+g.uid+"'>"+c+"</div>";VMM.ExternalAPI.googledocs.get(g)}else if(g.type=="youtube"){d="<div class='media-shadow'><div class='media-frame video youtube' id='"+
g.uid+"'>"+c+"</div></div>";VMM.ExternalAPI.youtube.get(g)}else if(g.type=="vimeo"){d="<div class='media-shadow media-frame video vimeo' id='"+g.uid+"'>"+c+"</div>";VMM.ExternalAPI.vimeo.get(g)}else if(g.type=="dailymotion")d="<div class='media-shadow'><iframe class='media-frame video dailymotion' autostart='false' frameborder='0' width='100%' height='100%' src='http://www.dailymotion.com/embed/video/"+g.id+"'></iframe></div>";else if(g.type=="vine"){d="<div class='media-shadow media-frame video vine' id='"+
g.uid+"'>"+c+"</div>";VMM.ExternalAPI.vine.get(g)}else if(g.type=="twitter"){d="<div class='twitter' id='"+g.uid+"'>"+c+"</div>";h=true;VMM.ExternalAPI.twitter.get(g)}else if(g.type=="twitter-ready"){h=true;d=g.id}else if(g.type=="soundcloud"){d="<div class='media-frame media-shadow soundcloud' id='"+g.uid+"'>"+c+"</div>";VMM.ExternalAPI.soundcloud.get(g)}else if(g.type=="google-map"){d="<div class='media-frame media-shadow map' id='"+g.uid+"'>"+c+"</div>";VMM.ExternalAPI.googlemaps.get(g)}else if(g.type==
"googleplus"){h="googleplus_"+g.id;d="<div class='googleplus' id='"+h+"'>"+c+"</div>";h=true;VMM.ExternalAPI.googleplus.get(g)}else if(g.type=="wikipedia"){d="<div class='wikipedia' id='"+g.uid+"'>"+c+"</div>";h=true;VMM.ExternalAPI.wikipedia.get(g)}else if(g.type=="storify"){h=true;d="<div class='plain-text-quote'>"+g.id+"</div>"}else if(g.type=="iframe"){h=true;d="<div class='media-shadow'><iframe class='media-frame video' autostart='false' frameborder='0' width='100%' height='100%' src='"+g.id+
"'></iframe></div>"}else if(g.type=="quote"){h=true;d="<div class='plain-text-quote'>"+g.id+"</div>"}else if(g.type=="unknown"){trace("NO KNOWN MEDIA TYPE FOUND TRYING TO JUST PLACE THE HTML");h=true;d="<div class='plain-text'><div class='container'>"+VMM.Util.properQuotes(g.id)+"</div></div>"}else if(g.type=="website"){d="<div class='media-shadow website' id='"+g.uid+"'>"+c+"</div>";VMM.ExternalAPI.webthumb.get(g)}else{trace("NO KNOWN MEDIA TYPE FOUND");trace(g.type)}d="<div class='media-container' >"+
d+e+f+"</div>";return h?"<div class='text-media'><div class='media-wrapper'>"+d+"</div></div>":"<div class='media-wrapper'>"+d+"</div>"}}}.init());
"undefined"!=typeof VMM&&"undefined"==typeof VMM.MediaType&&(VMM.MediaType=function(a){var a=a.replace(/^\s\s*/,"").replace(/\s\s*$/,""),b={type:"unknown",id:"",start:0,hd:false,link:"",lang:VMM.Language.lang,uniqueid:VMM.Util.unique_ID(6)};if(a.match("div class='twitter'")){b.type="twitter-ready";b.id=a}else if(a.match("(www.)?youtube|youtu.be")){a.match("v=")?b.id=VMM.Util.getUrlVars(a).v:a.match("/embed/")?b.id=a.split("embed/")[1].split(/[?&]/)[0]:a.match(/v\/|v=|youtu\.be\//)?b.id=a.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:
trace("YOUTUBE IN URL BUT NOT A VALID VIDEO");b.start=VMM.Util.getUrlVars(a).t;b.hd=VMM.Util.getUrlVars(a).hd;b.type="youtube"}else if(a.match("(player.)?vimeo.com")){b.type="vimeo";b.id=a.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0]}else if(a.match("(www.)?dailymotion.com")){b.id=a.split(/video\/|\/\/dailymotion\.com\//)[1];b.type="dailymotion"}else if(a.match("(www.)?vine.co")){trace("VINE");if(a.match("vine.co/v/")){b.id=a.split("vine.co/v/")[1];trace(b.id)}trace(a);b.type="vine"}else if(a.match("(player.)?soundcloud.com")){b.type=
"soundcloud";b.id=a}else if(a.match("(www.)?twitter.com")&&a.match("status")){b.id=a.match("status/")?a.split("status/")[1]:a.match("statuses/")?a.split("statuses/")[1]:"";b.type="twitter"}else if(a.match("maps.google")&&!a.match("staticmap")){b.type="google-map";b.id=a.split(/src=['|"][^'|"]*?['|"]/gi)}else if(a.match("plus.google")){b.type="googleplus";b.id=a.split("/posts/")[1];b.user=a.split("/posts/")[0].match("u/0/")?a.split("u/0/")[1].split("/posts")[0]:a.split("google.com/")[1].split("/posts/")[0]}else if(a.match("flickr.com/photos")){b.type=
"flickr";b.id=a.split("photos/")[1].split("/")[1];b.link=a}else if(a.match("instagr.am/p/")){b.type="instagram";b.link=a;b.id=a.split("/p/")[1].split("/")[0]}else if(a.match(/jpg|jpeg|png|gif/i)||a.match("staticmap")||a.match("yfrog.com")||a.match("twitpic.com")){b.type="image";b.id=a}else if(VMM.FileExtention.googleDocType(a)){b.type="googledoc";b.id=a}else if(a.match("(www.)?wikipedia.org")){b.type="wikipedia";var c=a.split("wiki/")[1].split("#")[0].replace("_"," ");b.id=c.replace(" ","%20");b.lang=
a.split("//")[1].split(".wikipedia")[0]}else if(a.indexOf("http://")==0){b.type="website";b.id=a}else if(a.match("storify")){b.type="storify";b.id=a}else if(a.match("blockquote")){b.type="quote";b.id=a}else if(a.match("iframe")){b.type="iframe";trace("IFRAME");trace(a.match(/src\=([^\s]*)\s/)[1].split(/"/)[1]);b.id=a.match(/src\=([^\s]*)\s/)[1].split(/"/)[1]}else{trace("unknown media");b.type="unknown";b.id=a}return b});
"undefined"!=typeof VMM&&"undefined"==typeof VMM.TextElement&&(VMM.TextElement={init:function(){return this},create:function(a){return a}}.init());
"undefined"!=typeof VMM&&"undefined"==typeof VMM.DragSlider&&(VMM.DragSlider=function(){var a,b,c,d,f,e,h,g,j,o,l,r,v;function s(a){VMM.unbindEvent(a.data.delement,B,w.move);g||a.preventDefault();a.stopPropagation();if(j){j=false;var b=a.data.element;VMM.unbindEvent(a.data.delement,B,w.move);J(b,a);return false}return true}function A(c){var f=c.data.element,h=c.data.delement;if(g){trace("IS TOUCH");VMM.Lib.css(f,"-webkit-transition-duration","0");e=c.originalEvent.touches[0].screenX;d=c.originalEvent.touches[0].screenY}else{e=
c.pageX;d=c.pageY}b=t(f);a=(new Date).getTime();VMM.Lib.stop(f);VMM.bindEvent(h,B,w.move,{element:f});g||c.preventDefault();return true}function L(a){g||a.preventDefault();if(j){j=false;var b=a.data.element;VMM.unbindEvent(a.data.delement,B,w.move);J(b,a);return false}return true}function B(a){var o=a.data.element,n;j=true;if(g){h=a.originalEvent.touches[0].screenX;f=a.originalEvent.touches[0].screenY}else{h=a.pageX;f=a.pageY}c=t(o);n=-(e-h-b);if(Math.abs(d)-Math.abs(f)>10){trace("SCROLLING Y");trace(Math.abs(d)-
Math.abs(f))}if(Math.abs(n-b)>10){VMM.Lib.css(o,"left",n);a.preventDefault();a.stopPropagation()}}function J(b){var d={left:c,left_adjust:0,change:{x:0},time:((new Date).getTime()-a)*10,time_adjust:((new Date).getTime()-a)*10},f=3E3;g&&(f=6E3);d.change.x=f*(Math.abs(h)-Math.abs(e));d.left_adjust=Math.round(d.change.x/d.time);d.left=Math.min(d.left+d.left_adjust);if(o)if(d.left>o.left){d.left=o.left;if(d.time>5E3)d.time=5E3}else if(d.left<o.right){d.left=o.right;if(d.time>5E3)d.time=5E3}VMM.fireEvent(F,
"DRAGUPDATE",[d]);G||d.time>0&&(g?VMM.Lib.animate(b,d.time,"easeOutCirc",{left:d.left}):VMM.Lib.animate(b,d.time,l,{left:d.left}))}function t(a){return parseInt(VMM.Lib.css(a,"left").substring(0,VMM.Lib.css(a,"left").length-2),10)}o=v=r="";j=false;a=c=b=f=d=h=e=0;g=false;l="easeOutExpo";var w={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},H={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},n={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},
F=this,G=false;this.createPanel=function(a,b,c,d,e){r=a;v=b;e!=null&&e!=""&&(G=e);o=c!=null&&c!=""?c:false;g=d?d:false;trace("TOUCH"+g);w=g?n:H;a=r;b=v;VMM.bindEvent(a,A,w.down,{element:b,delement:a});VMM.bindEvent(a,L,w.up,{element:b,delement:a});VMM.bindEvent(a,s,w.leave,{element:b,delement:a})};this.updateConstraint=function(a){trace("updateConstraint");o=a};this.cancelSlide=function(){VMM.unbindEvent(r,B,w.move);return true}});
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Slider&&(VMM.Slider=function(a,b){var c,d,f,e,h,g,j,o;function l(a,b){var g=true,h=false;a!=null&&(g=a);b!=null&&(h=b);N=n.slider.width;n.slider.nav.height=VMM.Lib.height(c);n.slider.content.padding=VMM.Browser.device=="mobile"||N<=640?10:n.slider.content.padding_default;n.slider.content.width=N-n.slider.content.padding*2;VMM.Lib.width(E,k.length*n.slider.content.width);h&&VMM.Lib.css(z,"left",k[u].leftpos());t();for(var j=h=0,j=0;j<k.length;j++){h=
j*(n.slider.width+n.spacing);k[j].leftpos(h)}VMM.Lib.css(d,"left","0");VMM.Lib.css(f,"left",N-n.slider.nav.width);VMM.Lib.height(d,n.slider.height);VMM.Lib.height(f,n.slider.height);VMM.Lib.css(e,"top",n.slider.height/2-n.slider.nav.height/2+10);VMM.Lib.css(c,"top",n.slider.height/2-n.slider.nav.height/2+10);VMM.Lib.css(e,"direction","ltr");VMM.Lib.css(c,"direction","ltr");VMM.Lib.height(G,n.slider.height);VMM.Lib.width(G,N);g&&w(u,"linear",1);u==0&&VMM.Lib.visible(d,false)}function r(a,b){trace("DRAG FINISH");
trace(b.left_adjust);trace(n.slider.width/2);if(b.left_adjust<0)if(Math.abs(b.left_adjust)>n.slider.width/2)if(u==k.length-1)H();else{w(u+1,"easeOutExpo");B()}else H();else if(Math.abs(b.left_adjust)>n.slider.width/2)if(u==0)H();else{w(u-1,"easeOutExpo");B()}else H()}function v(){if(u==k.length-1)H();else{w(u+1);B()}}function s(){if(u==0)H();else{w(u-1);B()}}function A(a){switch(a.keyCode){case 39:v(a);break;case 37:s(a)}}function L(){VMM.Lib.detach(q)}function B(){n.current_slide=u;VMM.fireEvent(K,
"UPDATE")}function J(){for(var a=0,a=0;a<k.length;a++)k[a].enqueue=true;for(a=0;a<n.preload;a++){if(!(u+a>k.length-1)){k[u+a].show();k[u+a].enqueue=false}if(!(u-a<0)){k[u-a].show();k[u-a].enqueue=false}}if(k.length>50)for(a=0;a<k.length;a++)k[a].enqueue&&k[a].hide();t()}function t(){var a=0,b=false,a=n.slider.content.width/100*60,c=n.slider.height-60,d={width:0,height:0},e=n.slider.content.width/100*40-30,f=n.slider.content.width,g=n.slider.height-110,h={width:0,height:0};if(VMM.Browser.device=="mobile"||
N<641)b=true;VMM.master_config.sizes.api.width=f;VMM.master_config.sizes.api.height=g;d=VMM.Util.ratio.fit(a,c,16,9);h=VMM.Util.ratio.fit(f,g,16,9);VMM.Lib.css(".slider-item","width",n.slider.content.width);VMM.Lib.height(".slider-item",n.slider.height);if(b){a=n.slider.content.width-n.slider.content.padding*2;f=n.slider.content.width-n.slider.content.padding*2;c=n.slider.height/100*50-50;g=n.slider.height/100*70-40;d=VMM.Util.ratio.fit(a,c,16,9);h=VMM.Util.ratio.fit(f,g,16,9);VMM.Lib.css(".slider-item .layout-text-media .text",
"width","100%");VMM.Lib.css(".slider-item .layout-text-media .text","display","block");VMM.Lib.css(".slider-item .layout-text-media .text .container","display","block");VMM.Lib.css(".slider-item .layout-text-media .text .container","width",f);VMM.Lib.css(".slider-item .layout-text-media .text .container .start","width","auto");VMM.Lib.css(".slider-item .layout-text-media .media","float","none");VMM.Lib.addClass(".slider-item .content-container","pad-top");VMM.Lib.css(".slider-item .media blockquote p",
"line-height","18px");VMM.Lib.css(".slider-item .media blockquote p","font-size","16px")}else{VMM.Lib.css(".slider-item .layout-text-media .text","width","40%");VMM.Lib.css(".slider-item .layout-text-media .text","display","table-cell");VMM.Lib.css(".slider-item .layout-text-media .text .container","display","table-cell");VMM.Lib.css(".slider-item .layout-text-media .text .container","width","auto");VMM.Lib.css(".slider-item .layout-text-media .text .container .start","width",e);VMM.Lib.removeClass(".slider-item .content-container",
"pad-top");VMM.Lib.css(".slider-item .layout-text-media .media","float","left");VMM.Lib.css(".slider-item .layout-text-media","display","table");VMM.Lib.css(".slider-item .media blockquote p","line-height","36px");VMM.Lib.css(".slider-item .media blockquote p","font-size","28px");VMM.Lib.css(".slider-item","display","table")}VMM.Lib.css(".slider-item","overflow-y","auto");VMM.Lib.css(".slider-item .layout-text-media .media .media-container .media-frame","max-width",a);VMM.Lib.height(".slider-item .layout-text-media .media .media-container .media-frame",
c);VMM.Lib.width(".slider-item .layout-text-media .media .media-container .media-frame",a);VMM.Lib.css(".slider-item .layout-text-media .media .media-container img","max-height",c);VMM.Lib.css(".slider-item .layout-media .media .media-container img","max-height",g);VMM.Lib.css(".slider-item .layout-text-media .media .media-container img","max-width",a);VMM.Lib.css(".slider-item .layout-text-media .media .media-container .avatar img","max-width",32);VMM.Lib.css(".slider-item .layout-text-media .media .media-container .avatar img",
"max-height",32);VMM.Lib.css(".slider-item .layout-media .media .media-container .avatar img","max-width",32);VMM.Lib.css(".slider-item .layout-media .media .media-container .avatar img","max-height",32);VMM.Lib.css(".slider-item .layout-text-media .media .media-container .article-thumb","max-width","50%");VMM.Lib.css(".slider-item .layout-media .media .media-container .article-thumb","max-width",200);VMM.Lib.width(".slider-item .layout-text-media .media .media-container .media-frame",d.width);VMM.Lib.height(".slider-item .layout-text-media .media .media-container .media-frame",
d.height);VMM.Lib.width(".slider-item .layout-media .media .media-container .media-frame",h.width);VMM.Lib.height(".slider-item .layout-media .media .media-container .media-frame",h.height);VMM.Lib.css(".slider-item .layout-media .media .media-container .media-frame","max-height",h.height);VMM.Lib.css(".slider-item .layout-media .media .media-container .media-frame","max-width",h.width);VMM.Lib.height(".slider-item .layout-media .media .media-container .soundcloud",168);VMM.Lib.height(".slider-item .layout-text-media .media .media-container .soundcloud",
168);VMM.Lib.width(".slider-item .layout-media .media .media-container .soundcloud",f);VMM.Lib.width(".slider-item .layout-text-media .media .media-container .soundcloud",a);VMM.Lib.css(".slider-item .media .media-container.soundcloud","max-height",168);VMM.Lib.height(".slider-item .layout-text-media .media .media-container .map",c);VMM.Lib.width(".slider-item .layout-text-media .media .media-container .map",a);VMM.Lib.css(".slider-item .layout-media .media .media-container .map","max-height",g);
VMM.Lib.width(".slider-item .layout-media .media .media-container .map",f);VMM.Lib.height(".slider-item .layout-text-media .media .media-container .doc",c);VMM.Lib.width(".slider-item .layout-text-media .media .media-container .doc",a);VMM.Lib.height(".slider-item .layout-media .media .media-container .doc",g);VMM.Lib.width(".slider-item .layout-media .media .media-container .doc",f);VMM.Lib.width(".slider-item .layout-media .media .media-container .wikipedia",f);VMM.Lib.width(".slider-item .layout-media .media .media-container .twitter",
f);VMM.Lib.width(".slider-item .layout-media .media .media-container .plain-text-quote",f);VMM.Lib.width(".slider-item .layout-media .media .media-container .plain-text",f);VMM.Lib.css(".slider-item .media .media-container","max-width",f);VMM.Lib.css(".slider-item .layout-text-media .media .media-container .caption","max-width",d.width);VMM.Lib.css(".slider-item .layout-media .media .media-container .caption","max-width",h.width);for(a=0;a<k.length;a++){k[a].layout(b);k[a].content_height()>n.slider.height+
20?k[a].css("display","block"):k[a].css("display","table")}}function w(a,b,c,e,l){var q=n.ease,r=n.duration,v=false,E=false,s="";VMM.ExternalAPI.youtube.stopPlayers();u=a;a=k[u].leftpos();u==0&&(E=true);u+1>=k.length&&(v=true);b!=null&&b!=""&&(q=b);c!=null&&c!=""&&(r=c);if(VMM.Browser.device=="mobile"){VMM.Lib.visible(d,false);VMM.Lib.visible(f,false)}else{if(E)VMM.Lib.visible(d,false);else{VMM.Lib.visible(d,true);s=VMM.Util.unlinkify(y[u-1].title);if(n.type=="timeline")if(typeof y[u-1].date==="undefined"){VMM.attachElement(h,
s);VMM.attachElement(g,"")}else{VMM.attachElement(h,VMM.Date.prettyDate(y[u-1].startdate,false,y[u-1].precisiondate));VMM.attachElement(g,s)}else VMM.attachElement(g,s)}if(v)VMM.Lib.visible(f,false);else{VMM.Lib.visible(f,true);s=VMM.Util.unlinkify(y[u+1].title);if(n.type=="timeline")if(typeof y[u+1].date==="undefined"){VMM.attachElement(j,s);VMM.attachElement(o,"")}else{VMM.attachElement(j,VMM.Date.prettyDate(y[u+1].startdate,false,y[u+1].precisiondate));VMM.attachElement(o,s)}else VMM.attachElement(o,
s)}}if(e)VMM.Lib.css(z,"left",-(a-n.slider.content.padding));else{VMM.Lib.stop(z);VMM.Lib.animate(z,r,q,{left:-(a-n.slider.content.padding)})}l&&VMM.fireEvent(K,"LOADED");if(k[u].height()>n.slider_height)VMM.Lib.css(".slider","overflow-y","scroll");else{VMM.Lib.css(K,"overflow-y","hidden");b=0;try{b=VMM.Lib.prop(K,"scrollHeight");VMM.Lib.animate(K,r,q,{scrollTop:b-VMM.Lib.height(K)})}catch(t){VMM.Lib.height(K)}}for(q=q=0;q<k.length;q++)k[q].clearTimers();setTimeout(J,n.duration);VMM.fireEvent(F,"MESSAGE",
"TEST")}function H(){VMM.Lib.stop(z);VMM.Lib.animate(z,n.duration,"easeOutExpo",{left:-k[u].leftpos()+n.slider.content.padding})}var n,F,G,z,E,O,q,y=[],k=[],u=0,N=960,S=false,K=a;g=o=h=j=d=f="";e=c=void 0;n=typeof b!="undefined"?b:{preload:4,current_slide:0,interval:10,something:0,width:720,height:400,ease:"easeInOutExpo",duration:1E3,timeline:false,spacing:15,slider:{width:720,height:400,content:{width:720,height:400,padding:120,padding_default:120},nav:{width:100,height:200}}};this.ver="0.6";n.slider.width=
n.width;n.slider.height=n.height;this.init=function(a){k=[];typeof a!="undefined"?this.setData(a):trace("WAITING ON DATA")};this.width=function(a){if(a!=null&&a!=""){n.slider.width=a;l()}else return n.slider.width};this.height=function(a){if(a!=null&&a!=""){n.slider.height=a;l()}else return n.slider.height};this.setData=function(a){if(typeof a!="undefined"){y=a;a=3E3;VMM.attachElement(K,"");F=VMM.getElement(K);G=VMM.appendAndGetElement(F,"<div>","slider-container-mask");z=VMM.appendAndGetElement(G,
"<div>","slider-container");E=VMM.appendAndGetElement(z,"<div>","slider-item-container");f=VMM.appendAndGetElement(F,"<div>","nav-next");d=VMM.appendAndGetElement(F,"<div>","nav-previous");e=VMM.appendAndGetElement(f,"<div>","nav-container","<div class='icon'>&nbsp;</div>");c=VMM.appendAndGetElement(d,"<div>","nav-container","<div class='icon'>&nbsp;</div>");if(n.type=="timeline"){j=VMM.appendAndGetElement(e,"<div>","date","");h=VMM.appendAndGetElement(c,"<div>","date","")}o=VMM.appendAndGetElement(e,
"<div>","title","");g=VMM.appendAndGetElement(c,"<div>","title","");VMM.bindEvent(".nav-next",v);VMM.bindEvent(".nav-previous",s);VMM.bindEvent(window,A,"keydown");var b=y,u=0;VMM.attachElement(E,"");k=[];for(u=0;u<b.length;u++){var t=new VMM.Slider.Slide(b[u],E);k.push(t)}if(VMM.Browser.device=="tablet"||VMM.Browser.device=="mobile"){n.duration=500;a=1E3;O=new VMM.DragSlider;O.createPanel(F,z,"",n.touch,true);VMM.bindEvent(O,r,"DRAGUPDATE");q=VMM.appendAndGetElement(G,"<div>","vco-feedback","");
trace("showMessege Swipe to Navigate");VMM.attachElement(q,"<div class='vco-explainer'><div class='vco-explainer-container'><div class='vco-bezel'><div class='vco-gesture-icon'></div><div class='vco-message'><p>Swipe to Navigate</p></div></div></div></div>");VMM.Lib.height(q,n.slider.height);VMM.bindEvent(q,L);VMM.bindEvent(q,L,"touchend")}l(false,true);VMM.Lib.visible(d,false);w(n.current_slide,"easeOutExpo",a,true,true);S=true}else trace("NO DATA")};this.getData=function(){return y};this.setConfig=
function(a){typeof a!="undefined"?n=a:trace("NO CONFIG DATA")};this.getConfig=function(){return n};this.setSize=function(a,b){if(a!=null)n.slider.width=a;if(b!=null)n.slider.height=b;S&&l()};this.active=function(){return S};this.getCurrentNumber=function(){return u};this.setSlide=function(a){w(a)}});
"undefined"!=typeof VMM.Slider&&(VMM.Slider.Slide=function(a,b){var c,d,f,e,h,g,j,o,l,r;r="";var v=false,s=false,A=false,L=true,B=false,J="slide_",t="",w="",H="",n=false,J=J+a.uniqueid;this.enqueue=L;this.id=J;r=VMM.appendAndGetElement(b,"<div>","slider-item");if(typeof a.classname!="undefined"){trace("HAS CLASSNAME");VMM.Lib.addClass(r,a.classname)}else{trace("NO CLASSNAME");trace(a)}e="";h="content-container layout";f=d=c=false;this.show=function(b){L=false;n=b;B=false;clearTimeout(H);if(!v)if(s){clearTimeout(w);
w=setTimeout(G,100)}else{trace("RENDER "+J);s=v=true;n=b;trace("BUILDSLIDE");l=VMM.appendAndGetElement(r,"<div>","content");o=VMM.appendAndGetElement(l,"<div>");if(a.startdate!=null&&a.startdate!=""&&type.of(a.startdate)=="date"&&a.type!="start"){var b=VMM.Date.prettyDate(a.startdate,false,a.precisiondate),z=VMM.Date.prettyDate(a.enddate,false,a.precisiondate),q="";a.tag!=null&&a.tag!=""&&(q=VMM.createElement("span",a.tag,"slide-tag"));e=b!=z?e+VMM.createElement("h2",b+" &mdash; "+z+q,"date"):e+VMM.createElement("h2",
b+q,"date")}if(a.headline!=null&&a.headline!=""){c=true;e=a.type=="start"?e+VMM.createElement("h2",VMM.Util.linkify_with_twitter(a.headline,"_blank"),"start"):e+VMM.createElement("h3",VMM.Util.linkify_with_twitter(a.headline,"_blank"))}if(a.text!=null&&a.text!=""){d=true;e=e+VMM.createElement("p",VMM.Util.linkify_with_twitter(a.text,"_blank"))}if(d||c){e=VMM.createElement("div",e,"container");j=VMM.appendAndGetElement(o,"<div>","text",VMM.TextElement.create(e))}if(a.asset!=null&&a.asset!=""&&a.asset.media!=
null&&a.asset.media!=""){f=true;g=VMM.appendAndGetElement(o,"<div>","media",VMM.MediaElement.create(a.asset,a.uniqueid))}d&&(h=h+"-text");f&&(h=h+"-media");if(d)if(n){VMM.Lib.addClass(o,h);A=true}else{VMM.Lib.addClass(o,h);VMM.Lib.addClass(o,"pad-left");VMM.Lib.detach(j);VMM.Lib.append(o,j)}else VMM.Lib.addClass(o,h);clearTimeout(t);clearTimeout("");t=setTimeout(VMM.ExternalAPI.pushQues,500)}};this.hide=function(){if(v&&!B){B=true;clearTimeout(H);H=setTimeout(F,3E4)}};this.clearTimers=function(){clearTimeout(w);
clearTimeout(t);clearTimeout("")};this.layout=function(a){v&&s&&z(a)};this.elem=function(){return r};this.position=function(){return VMM.Lib.position(r)};this.leftpos=function(a){if(typeof a!="undefined")VMM.Lib.css(r,"left",a);else return VMM.Lib.position(r).left};this.animate=function(a,b,c){VMM.Lib.animate(r,a,b,c)};this.css=function(a,b){VMM.Lib.css(r,a,b)};this.opacity=function(a){VMM.Lib.css(r,"opacity",a)};this.width=function(){return VMM.Lib.width(r)};this.height=function(){return VMM.Lib.height(r)};
this.content_height=function(){var a=VMM.Lib.find(r,".content")[0];return a!="undefined"&&a!=null?VMM.Lib.height(a):0};var F=function(){trace("REMOVE SLIDE TIMER FINISHED");v=false;VMM.Lib.detach(j);VMM.Lib.detach(g)},G=function(){v=true;z(n,true)},z=function(a,b){if(d)if(a){if(!A||b){VMM.Lib.removeClass(o,"pad-left");VMM.Lib.detach(j);VMM.Lib.detach(g);VMM.Lib.append(o,j);VMM.Lib.append(o,g);A=true}}else{if(A||b){VMM.Lib.addClass(o,"pad-left");VMM.Lib.detach(j);VMM.Lib.detach(g);VMM.Lib.append(o,
g);VMM.Lib.append(o,j);A=false}}else if(b){if(c){VMM.Lib.detach(j);VMM.Lib.append(o,j)}VMM.Lib.detach(g);VMM.Lib.append(o,g)}}});
var Aes={cipher:function(a,b){for(var c=b.length/4-1,d=[[],[],[],[]],f=0;f<16;f++)d[f%4][Math.floor(f/4)]=a[f];d=Aes.addRoundKey(d,b,0,4);for(f=1;f<c;f++){d=Aes.subBytes(d,4);d=Aes.shiftRows(d,4);d=Aes.mixColumns(d,4);d=Aes.addRoundKey(d,b,f,4)}d=Aes.subBytes(d,4);d=Aes.shiftRows(d,4);d=Aes.addRoundKey(d,b,c,4);c=Array(16);for(f=0;f<16;f++)c[f]=d[f%4][Math.floor(f/4)];return c},keyExpansion:function(a){for(var b=a.length/4,c=b+6,d=Array(4*(c+1)),f=Array(4),e=0;e<b;e++)d[e]=[a[4*e],a[4*e+1],a[4*e+
2],a[4*e+3]];for(e=b;e<4*(c+1);e++){d[e]=Array(4);for(a=0;a<4;a++)f[a]=d[e-1][a];if(e%b==0){f=Aes.subWord(Aes.rotWord(f));for(a=0;a<4;a++)f[a]=f[a]^Aes.rCon[e/b][a]}else b>6&&e%b==4&&(f=Aes.subWord(f));for(a=0;a<4;a++)d[e][a]=d[e-b][a]^f[a]}return d},subBytes:function(a,b){for(var c=0;c<4;c++)for(var d=0;d<b;d++)a[c][d]=Aes.sBox[a[c][d]];return a},shiftRows:function(a,b){for(var c=Array(4),d=1;d<4;d++){for(var f=0;f<4;f++)c[f]=a[d][(f+d)%b];for(f=0;f<4;f++)a[d][f]=c[f]}return a},mixColumns:function(a){for(var b=
0;b<4;b++){for(var c=Array(4),d=Array(4),f=0;f<4;f++){c[f]=a[f][b];d[f]=a[f][b]&128?a[f][b]<<1^283:a[f][b]<<1}a[0][b]=d[0]^c[1]^d[1]^c[2]^c[3];a[1][b]=c[0]^d[1]^c[2]^d[2]^c[3];a[2][b]=c[0]^c[1]^d[2]^c[3]^d[3];a[3][b]=c[0]^d[0]^c[1]^c[2]^d[3]}return a},addRoundKey:function(a,b,c,d){for(var f=0;f<4;f++)for(var e=0;e<d;e++)a[f][e]=a[f][e]^b[c*4+e][f];return a},subWord:function(a){for(var b=0;b<4;b++)a[b]=Aes.sBox[a[b]];return a},rotWord:function(a){for(var b=a[0],c=0;c<3;c++)a[c]=a[c+1];a[3]=b;return a},
sBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,
61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],rCon:[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,
0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Ctr:{}};
Aes.Ctr.encrypt=function(a,b,c){if(!(c==128||c==192||c==256))return"";for(var a=Utf8.encode(a),b=Utf8.encode(b),d=c/8,f=Array(d),c=0;c<d;c++)f[c]=isNaN(b.charCodeAt(c))?0:b.charCodeAt(c);for(var f=Aes.cipher(f,Aes.keyExpansion(f)),f=f.concat(f.slice(0,d-16)),b=Array(16),c=(new Date).getTime(),d=c%1E3,e=Math.floor(c/1E3),h=Math.floor(Math.random()*65535),c=0;c<2;c++)b[c]=d>>>c*8&255;for(c=0;c<2;c++)b[c+2]=h>>>c*8&255;for(c=0;c<4;c++)b[c+4]=e>>>c*8&255;d="";for(c=0;c<8;c++)d=d+String.fromCharCode(b[c]);
for(var f=Aes.keyExpansion(f),e=Math.ceil(a.length/16),h=Array(e),g=0;g<e;g++){for(c=0;c<4;c++)b[15-c]=g>>>c*8&255;for(c=0;c<4;c++)b[15-c-4]=g/4294967296>>>c*8;for(var j=Aes.cipher(b,f),o=g<e-1?16:(a.length-1)%16+1,l=Array(o),c=0;c<o;c++){l[c]=j[c]^a.charCodeAt(g*16+c);l[c]=String.fromCharCode(l[c])}h[g]=l.join("")}a=d+h.join("");return a=Base64.encode(a)};
Aes.Ctr.decrypt=function(a,b,c){if(!(c==128||c==192||c==256))return"";for(var a=Base64.decode(a),b=Utf8.encode(b),d=c/8,f=Array(d),c=0;c<d;c++)f[c]=isNaN(b.charCodeAt(c))?0:b.charCodeAt(c);f=Aes.cipher(f,Aes.keyExpansion(f));f=f.concat(f.slice(0,d-16));b=Array(8);ctrTxt=a.slice(0,8);for(c=0;c<8;c++)b[c]=ctrTxt.charCodeAt(c);for(var d=Aes.keyExpansion(f),f=Math.ceil((a.length-8)/16),c=Array(f),e=0;e<f;e++)c[e]=a.slice(8+e*16,e*16+24);for(var a=c,h=Array(a.length),e=0;e<f;e++){for(c=0;c<4;c++)b[15-
c]=e>>>c*8&255;for(c=0;c<4;c++)b[15-c-4]=(e+1)/4294967296-1>>>c*8&255;for(var g=Aes.cipher(b,d),j=Array(a[e].length),c=0;c<a[e].length;c++){j[c]=g[c]^a[e].charCodeAt(c);j[c]=String.fromCharCode(j[c])}h[e]=j.join("")}a=h.join("");return a=Utf8.decode(a)};
var Base64={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a,b){var c,d,f,e,h=[],g="",j,o,l=Base64.code;o=(typeof b=="undefined"?0:b)?a.encodeUTF8():a;j=o.length%3;if(j>0)for(;j++<3;){g=g+"=";o=o+"\x00"}for(j=0;j<o.length;j=j+3){c=o.charCodeAt(j);d=o.charCodeAt(j+1);f=o.charCodeAt(j+2);e=c<<16|d<<8|f;c=e>>18&63;d=e>>12&63;f=e>>6&63;e=e&63;h[j/3]=l.charAt(c)+l.charAt(d)+l.charAt(f)+l.charAt(e)}h=h.join("");return h=h.slice(0,h.length-g.length)+g},decode:function(a,
b){var b=typeof b=="undefined"?false:b,c,d,f,e,h,g=[],j,o=Base64.code;j=b?a.decodeUTF8():a;for(var l=0;l<j.length;l=l+4){c=o.indexOf(j.charAt(l));d=o.indexOf(j.charAt(l+1));e=o.indexOf(j.charAt(l+2));h=o.indexOf(j.charAt(l+3));f=c<<18|d<<12|e<<6|h;c=f>>>16&255;d=f>>>8&255;f=f&255;g[l/4]=String.fromCharCode(c,d,f);h==64&&(g[l/4]=String.fromCharCode(c,d));e==64&&(g[l/4]=String.fromCharCode(c))}e=g.join("");return b?e.decodeUTF8():e}},Utf8={encode:function(a){a=a.replace(/[\u0080-\u07ff]/g,function(a){a=
a.charCodeAt(0);return String.fromCharCode(192|a>>6,128|a&63)});return a=a.replace(/[\u0800-\uffff]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(224|a>>12,128|a>>6&63,128|a&63)})},decode:function(a){a=a.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&15)<<12|(a.charCodeAt(1)&63)<<6|a.charCodeAt(2)&63;return String.fromCharCode(a)});return a=a.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(a){a=(a.charCodeAt(0)&31)<<6|a.charCodeAt(1)&63;return String.fromCharCode(a)})}};
!function(a){var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,d,f){this.type=b;this.$element=a(d);this.options=this.getOptions(f);this.enabled=true;if(this.options.trigger!="manual"){b=this.options.trigger=="hover"?"mouseenter":"focus";d=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(b,this.options.selector,a.proxy(this.enter,this));this.$element.on(d,this.options.selector,a.proxy(this.leave,this))}this.options.selector?this._options=a.extend({},
this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=a.extend({},a.fn[this.type].defaults,b,this.$element.data());if(b.delay&&typeof b.delay=="number")b.delay={show:b.delay,hide:b.delay};return b},enter:function(b){var d=a(b.currentTarget)[this.type](this._options).data(this.type);if(!d.options.delay||!d.options.delay.show)d.show();else{d.hoverState="in";setTimeout(function(){d.hoverState=="in"&&d.show()},d.options.delay.show)}},leave:function(b){var d=a(b.currentTarget)[this.type](this._options).data(this.type);
if(!d.options.delay||!d.options.delay.hide)d.hide();else{d.hoverState="out";setTimeout(function(){d.hoverState=="out"&&d.hide()},d.options.delay.hide)}},show:function(){var a,b,f,e,h,g,j;if(this.hasContent()&&this.enabled){a=this.tip();this.setContent();this.options.animation&&a.addClass("fade");g=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;b=/in/.test(g);a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:
document.body);f=this.getPosition(b);e=a[0].offsetWidth;h=a[0].offsetHeight;switch(b?g.split(" ")[1]:g){case "bottom":j={top:f.top+f.height,left:f.left+f.width/2-e/2};break;case "top":j={top:f.top-h,left:f.left+f.width/2-e/2};break;case "left":j={top:f.top+f.height/2-h/2,left:f.left-e};break;case "right":j={top:f.top+f.height/2-h/2,left:f.left+f.width}}a.css(j).addClass(g).addClass("in")}},setContent:function(){var a=this.tip();a.find(".timeline-tooltip-inner").html(this.getTitle());a.removeClass("fade in top bottom left right")},
hide:function(){function b(){var c=setTimeout(function(){d.off(a.support.transition.end).remove()},500);d.one(a.support.transition.end,function(){clearTimeout(c);d.remove()})}var d=this.tip();d.removeClass("in");a.support.transition&&this.$tip.hasClass("fade")?b():d.remove()},fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("data-original-title")!="string")a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},
getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a;a=this.$element;var b=this.options;a=a.attr("data-original-title")||(typeof b.title=="function"?b.title.call(a[0]):b.title);return a=a.toString().replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.options=
this.$element=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};a.fn.tooltip=function(c){return this.each(function(){var d=a(this),f=d.data("tooltip"),e=typeof c=="object"&&c;f||d.data("tooltip",f=new b(this,e));if(typeof c=="string")f[c]()})};a.fn.tooltip.Constructor=b;a.fn.tooltip.defaults={animation:true,delay:0,selector:false,placement:"top",
trigger:"hover",title:"",template:'<div class="timeline-tooltip"><div class="timeline-tooltip-arrow"></div><div class="timeline-tooltip-inner"></div></div>'}}(window.jQuery);"undefined"!=typeof VMM&&"undefined"==typeof VMM.StoryJS&&(VMM.StoryJS=function(){this.init=function(){}});
"undefined"!=typeof VMM&&"undefined"==typeof VMM.Timeline&&(VMM.Timeline=function(a,b,c){function d(a){typeof embed_config=="object"&&(timeline_config=embed_config);if(typeof timeline_config=="object"){trace("HAS TIMELINE CONFIG");k=VMM.Util.mergeConfig(k,timeline_config)}else typeof a=="object"&&(k=VMM.Util.mergeConfig(k,a));if(VMM.Browser.device=="mobile"||VMM.Browser.device=="tablet")k.touch=true;k.nav.width=k.width;k.nav.height=200;k.feature.width=k.width;k.feature.height=k.height-k.nav.height;
k.nav.zoom.adjust=parseInt(k.start_zoom_adjust,10);VMM.Timeline.Config=k;VMM.master_config.Timeline=VMM.Timeline.Config;this.events=k.events;if(k.gmap_key!="")k.api_keys.google=k.gmap_key;trace("VERSION "+k.version)}function f(a,b){trace("onDataReady");q=b.timeline;if(type.of(q.era)!="array")q.era=[];J()}function e(){B();z.setSize(k.feature.width,k.feature.height);E.setSize(k.width,k.height);var a;a=s(window.orientation);if(a==k.orientation)a=false;else{k.orientation=a;a=true}a&&v()}function h(){k.loaded.slider=
true;g()}function g(){k.loaded.percentloaded=k.loaded.percentloaded+25;k.loaded.slider&&k.loaded.timenav&&VMM.Lib.animate(n,k.duration,k.ease*4,{opacity:0},L)}function j(){k.loaded.timenav=true;g()}function o(){K=true;k.current_slide=z.getCurrentNumber();if(k.hash_bookmark)window.location.hash="#"+k.current_slide.toString();E.setMarker(k.current_slide,k.ease,k.duration)}function l(){K=true;k.current_slide=E.getCurrentNumber();if(k.hash_bookmark)window.location.hash="#"+k.current_slide.toString();
z.setSlide(k.current_slide)}function r(a){if(a<=y.length-1&&a>=0){k.current_slide=a;z.setSlide(k.current_slide);E.setMarker(k.current_slide,k.ease,k.duration)}}function v(){s(window.orientation);document.getElementById("viewport")}function s(a){return a==0||a==180?"portrait":a==90||a==-90?"landscape":"normal"}function A(a,b,c){trace("showMessege "+b);c?VMM.attachElement(n,b):VMM.attachElement(n,VMM.MediaElement.loadingmessage(b))}function L(){VMM.Lib.detach(n)}function B(){trace("UPDATE SIZE");k.width=
VMM.Lib.width(t);k.height=VMM.Lib.height(t);k.nav.width=k.width;k.feature.width=k.width;k.feature.height=k.height-k.nav.height-3;k.width<641?VMM.Lib.addClass(t,"vco-skinny"):VMM.Lib.removeClass(t,"vco-skinny")}function J(){y=[];VMM.fireEvent(global,k.events.messege,"Building Dates");B();for(var a=0;a<q.date.length;a++)if(q.date[a].startDate!=null&&q.date[a].startDate!=""){var b={},c=VMM.Date.parse(q.date[a].startDate,true);b.startdate=c.date;b.precisiondate=c.precision;if(!isNaN(b.startdate)){b.enddate=
q.date[a].endDate!=null&&q.date[a].endDate!=""?VMM.Date.parse(q.date[a].endDate):b.startdate;b.needs_slug=false;if(q.date[a].headline==""&&q.date[a].slug!=null&&q.date[a].slug!="")b.needs_slug=true;b.title=q.date[a].headline;b.headline=q.date[a].headline;b.type=q.date[a].type;b.date=VMM.Date.prettyDate(b.startdate,false,b.precisiondate);b.asset=q.date[a].asset;b.fulldate=b.startdate.getTime();b.text=q.date[a].text;b.content="";b.tag=q.date[a].tag;b.slug=q.date[a].slug;b.uniqueid=VMM.Util.unique_ID(7);
b.classname=q.date[a].classname;y.push(b)}}q.type!="storify"&&y.sort(function(a,b){return a.fulldate-b.fulldate});if(q.headline!=null&&q.headline!=""&&q.text!=null&&q.text!=""){b={};if(typeof q.startDate!="undefined"){c=VMM.Date.parse(q.startDate,true);a=c.date}else a=false;trace("HAS STARTPAGE");trace(a);if(a&&a<y[0].startdate)b.startdate=new Date(a);else{a=y[0].startdate;b.startdate=new Date(y[0].startdate);a.getMonth()===0&&a.getDate()==1&&a.getHours()===0&&a.getMinutes()===0?b.startdate.setFullYear(a.getFullYear()-
1):a.getDate()<=1&&a.getHours()===0&&a.getMinutes()===0?b.startdate.setMonth(a.getMonth()-1):a.getHours()===0&&a.getMinutes()===0?b.startdate.setDate(a.getDate()-1):a.getMinutes()===0?b.startdate.setHours(a.getHours()-1):b.startdate.setMinutes(a.getMinutes()-1)}b.uniqueid=VMM.Util.unique_ID(7);b.enddate=b.startdate;b.precisiondate=c.precision;b.title=q.headline;b.headline=q.headline;b.text=q.text;b.type="start";b.date=VMM.Date.prettyDate(q.startDate,false,b.precisiondate);b.asset=q.asset;b.slug=false;
b.needs_slug=false;b.fulldate=b.startdate.getTime();k.embed&&VMM.fireEvent(global,k.events.headline,b.headline);y.unshift(b)}q.type!="storify"&&y.sort(function(a,b){return a.fulldate-b.fulldate});if(parseInt(k.start_at_slide)>0&&k.current_slide==0)k.current_slide=parseInt(k.start_at_slide);if(k.start_at_end&&k.current_slide==0)k.current_slide=y.length-1;if(S){S=true;VMM.fireEvent(global,k.events.messege,"Internet Explorer "+VMM.Browser.version+" is not supported by TimelineJS. Please update your browser to version 8 or higher.")}else{L();
e();VMM.bindEvent(F,h,"LOADED");VMM.bindEvent(G,j,"LOADED");VMM.bindEvent(F,o,"UPDATE");VMM.bindEvent(G,l,"UPDATE");z.init(y);E.init(y,q.era);VMM.bindEvent(global,e,k.events.resize)}}var t,w,H,n,F,G,z,E,O="#timelinejs",q={},y=[],k={},u=false,N=false,S=false,K=false,O=type.of(a)=="string"?a.match("#")?a:"#"+a:"#timelinejs",k={embed:false,events:{data_ready:"DATAREADY",messege:"MESSEGE",headline:"HEADLINE",slide_change:"SLIDE_CHANGE",resize:"resize"},id:O,source:"nothing",type:"timeline",touch:false,
orientation:"normal",maptype:"toner",version:"2.x",preload:4,current_slide:0,hash_bookmark:false,start_at_end:false,start_at_slide:0,start_zoom_adjust:0,start_page:false,api_keys:{google:"",flickr:"",twitter:""},interval:10,something:0,width:960,height:540,spacing:15,loaded:{slider:false,timenav:false,percentloaded:0},nav:{start_page:false,interval_width:200,density:4,minor_width:0,minor_left:0,constraint:{left:0,right:0,right_min:0,right_max:0},zoom:{adjust:0},multiplier:{current:6,min:0.1,max:50},
rows:[1,1,1],width:960,height:200,marker:{width:150,height:50}},feature:{width:960,height:540},slider:{width:720,height:400,content:{width:720,height:400,padding:130,padding_default:130},nav:{width:100,height:200}},ease:"easeInOutExpo",duration:1E3,gmap_key:"",language:VMM.Language};if(b!=null&&b!=""){k.width=b;u=true}if(c!=null&&c!=""){k.height=c;N=true}if(window.location.hash){a=window.location.hash.substring(1);if(!isNaN(a))k.current_slide=parseInt(a)}window.onhashchange=function(){var a=window.location.hash.substring(1);
k.hash_bookmark?K?r(parseInt(a)):K=false:r(parseInt(a))};this.init=function(a,b){trace("INIT");v();d(a);t=VMM.getElement(O);VMM.Lib.addClass(t,"vco-timeline");VMM.Lib.addClass(t,"vco-storyjs");w=VMM.appendAndGetElement(t,"<div>","vco-container vco-main");H=VMM.appendAndGetElement(w,"<div>","vco-feature");F=VMM.appendAndGetElement(H,"<div>","vco-slider");G=VMM.appendAndGetElement(w,"<div>","vco-navigation");n=VMM.appendAndGetElement(t,"<div>","vco-feedback","");typeof k.language.right_to_left!="undefined"&&
VMM.Lib.addClass(t,"vco-right-to-left");z=new VMM.Slider(F,k);E=new VMM.Timeline.TimeNav(G);u?VMM.Lib.width(t,k.width):k.width=VMM.Lib.width(t);N?VMM.Lib.height(t,k.height):k.height=VMM.Lib.height(t);k.touch?VMM.Lib.addClass(t,"vco-touch"):VMM.Lib.addClass(t,"vco-notouch");if(type.of(b)=="string")k.source=b;VMM.Date.setLanguage(k.language);VMM.master_config.language=k.language;VMM.ExternalAPI.setKeys(k.api_keys);VMM.ExternalAPI.googlemaps.setMapType(k.maptype);VMM.bindEvent(global,f,k.events.data_ready);
VMM.bindEvent(global,A,k.events.messege);VMM.fireEvent(global,k.events.messege,k.language.messages.loading_timeline);if(VMM.Browser.browser=="Explorer"||VMM.Browser.browser=="MSIE")parseInt(VMM.Browser.version,10)<=7&&(S=true);type.of(k.source)=="string"||type.of(k.source)=="object"?VMM.Timeline.DataObj.getData(k.source):VMM.fireEvent(global,k.events.messege,"No data source provided")};this.iframeLoaded=function(){trace("iframeLoaded")};this.reload=function(a){trace("Load new timeline data"+a);VMM.fireEvent(global,
k.events.messege,k.language.messages.loading_timeline);q={};VMM.Timeline.DataObj.getData(a);k.current_slide=0;z.setSlide(0);E.setMarker(0,k.ease,k.duration)};this.goToEvent=function(a){r(a)};this.getDates=function(){return y};this.getTimelineID=function(){return O}},VMM.Timeline.Config={});
"undefined"!=typeof VMM.Timeline&&"undefined"==typeof VMM.Timeline.TimeNav&&(VMM.Timeline.TimeNav=function(a,b,c){var d,f,e,h,g,j,o,l,r,v,s,A,L,B,J,t,w,H,n,F,G,z,E,O,q,y;function k(a){m.nav.constraint.left=m.width/2;m.nav.constraint.right=m.nav.constraint.right_min-m.width/2;U.updateConstraint(m.nav.constraint);VMM.Lib.css(qa,"left",Math.round(m.width/2)+2);VMM.Lib.css(ra,"left",Math.round(m.width/2)-8);ca(m.current_slide,m.ease,m.duration,true,a)}function u(){U.cancelSlide();if(m.nav.multiplier.current>
m.nav.multiplier.min){m.nav.multiplier.current=m.nav.multiplier.current<=1?m.nav.multiplier.current-0.25:m.nav.multiplier.current>5?m.nav.multiplier.current>16?Math.round(m.nav.multiplier.current-10):Math.round(m.nav.multiplier.current-4):Math.round(m.nav.multiplier.current-1);if(m.nav.multiplier.current<=0)m.nav.multiplier.current=m.nav.multiplier.min;ma()}}function N(){U.cancelSlide();if(m.nav.multiplier.current<m.nav.multiplier.max){m.nav.multiplier.current=m.nav.multiplier.current>4?m.nav.multiplier.current>
16?Math.round(m.nav.multiplier.current+10):Math.round(m.nav.multiplier.current+4):Math.round(m.nav.multiplier.current+1);if(m.nav.multiplier.current>=m.nav.multiplier.max)m.nav.multiplier.current=m.nav.multiplier.max;ma()}}function S(){U.cancelSlide();ca(0);VMM.fireEvent(Q,"UPDATE")}function K(a){var b=0,c=0;if(!a)a=window.event;if(a.originalEvent)a=a.originalEvent;typeof a.wheelDeltaX!="undefined"&&(b=Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)?a.wheelDeltaX/6:0);if(b){a.preventDefault&&a.preventDefault();
a.returnValue=false}c=VMM.Lib.position(R).left+b;if(c>m.nav.constraint.left)c=m.width/2;else if(c<m.nav.constraint.right)c=m.nav.constraint.right;VMM.Lib.css(R,"left",c)}function ma(){trace("config.nav.multiplier "+m.nav.multiplier.current);na(true);oa(true);Z($,W,true,true);Z(ea,aa,true);m.nav.constraint.left=m.width/2;m.nav.constraint.right=m.nav.constraint.right_min-m.width/2;U.updateConstraint(m.nav.constraint)}function ua(a){U.cancelSlide();ca(a.data.number);VMM.fireEvent(Q,"UPDATE")}function va(a){VMM.Lib.toggleClass(a.data.elem,
"zFront")}function ca(a,b,c){trace("GO TO MARKER");var g=m.ease,h=m.duration;X=a;e=m.width/2-I[X].pos_left;d=Math.abs(e)-100;f=Math.abs(e)+m.width+100;b!=null&&b!=""&&(g=b);c!=null&&c!=""&&(h=c);for(a=0;a<I.length;a++)VMM.Lib.removeClass(I[a].marker,"active");if(m.start_page&&I[0].type=="start"){VMM.Lib.visible(I[0].marker,false);VMM.Lib.addClass(I[0].marker,"start")}VMM.Lib.addClass(I[X].marker,"active");VMM.Lib.stop(R);VMM.Lib.animate(R,h,g,{left:e})}function Y(a){var b={};b.days=a/L;b.weeks=b.days/
B;b.months=b.days/J;b.years=b.months/t;b.hours=b.days*w;b.minutes=b.days*H;b.seconds=b.days*n;b.decades=b.years/F;b.centuries=b.years/G;b.milleniums=b.years/z;b.ages=b.years/E;b.epochs=b.years/O;b.eras=b.years/q;b.eons=b.years/y;return b}function ka(a,b,c){var d,a=a.type,e={start:"",end:"",type:a};d=Y(b);e.start=b.months;if(a=="eon")e.start=d.eons;else if(a=="era")e.start=d.eras;else if(a=="epoch")e.start=d.epochs;else if(a=="age")e.start=d.ages;else if(a=="millenium")e.start=b.milleniums;else if(a==
"century")e.start=d.centuries;else if(a=="decade")e.start=d.decades;else if(a=="year")e.start=d.years;else if(a=="month")e.start=d.months;else if(a=="week")e.start=d.weeks;else if(a=="day")e.start=d.days;else if(a=="hour")e.start=d.hours;else if(a=="minute")e.start=d.minutes;if(type.of(c)=="date"){b=Y(c);e.end=c.months;if(a=="eon")e.end=b.eons;else if(a=="era")e.end=b.eras;else if(a=="epoch")e.end=b.epochs;else if(a=="age")e.end=b.ages;else if(a=="millenium")e.end=c.milleniums;else if(a=="century")e.end=
b.centuries;else if(a=="decade")e.end=b.decades;else if(a=="year")e.end=b.years;else if(a=="month")e.end=b.months;else if(a=="week")e.end=b.weeks;else if(a=="day")e.end=b.days;else if(a=="hour")e.end=b.hours;else if(a=="minute")e.end=b.minutes}else e.end=e.start;return e}function da(a,b){return{begin:(b.start-C.base)*(m.nav.interval_width/m.nav.multiplier.current),end:(b.end-C.base)*(m.nav.interval_width/m.nav.multiplier.current)}}function na(a){var b=2,c=0,g=0,h=0,j=m.width,k=[],o=d-j,n=0,p=0;m.nav.minor_width=
m.width;VMM.Lib.removeClass(".flag","row1");VMM.Lib.removeClass(".flag","row2");VMM.Lib.removeClass(".flag","row3");for(n=0;n<I.length;n++){var l=I[n],q=da(C,I[n].relative_pos),p=0,r={id:n,pos:0,row:0};q.begin=Math.round(q.begin+-2);q.end=Math.round(q.end+-2);p=Math.round(q.end-q.begin);l.pos_left=q.begin;if(X==n){e=m.width/2-q;d=Math.abs(e);f=Math.abs(e)+m.width;o=d-j}Math.abs(q.begin)>=o&&Math.abs(q.begin);if(a){VMM.Lib.stop(l.marker);VMM.Lib.animate(l.marker,m.duration/2,m.ease,{left:q.begin})}else{VMM.Lib.stop(l.marker);
VMM.Lib.css(l.marker,"left",q.begin)}if(n==X)h=q.begin;if(p>5){VMM.Lib.css(l.lineevent,"height",6);VMM.Lib.css(l.lineevent,"top",150);a?VMM.Lib.animate(l.lineevent,m.duration/2,m.ease,{width:p}):VMM.Lib.css(l.lineevent,"width",p)}if(M.length>0)for(p=0;p<M.length;p++){if(p<m.nav.rows.current.length&&l.tag==M[p]){b=p;if(p==m.nav.rows.current.length-1){trace("ON LAST ROW");VMM.Lib.addClass(l.flag,"flag-small-last")}}}else if(q.begin-c.begin<m.nav.marker.width+m.spacing)if(b<m.nav.rows.current.length-
1)b++;else{b=0;g++}else b=g=1;p=m.nav.rows.current[b];c=q;r.pos=q;r.row=b;k.push(r);k.length>6&&k.remove(0);if(a){VMM.Lib.stop(l.flag);VMM.Lib.animate(l.flag,m.duration,m.ease,{top:p})}else{VMM.Lib.stop(l.flag);VMM.Lib.css(l.flag,"top",p)}m.start_page&&I[n].type=="start"&&VMM.Lib.visible(l.marker,false);if(q>m.nav.minor_width)m.nav.minor_width=q;if(q<m.nav.minor_left)m.nav.minor_left=q}if(a){VMM.Lib.stop(R);VMM.Lib.animate(R,m.duration/2,m.ease,{left:m.width/2-h})}}function oa(a){for(var b=0,c=0,
b=0;b<fa.length;b++){var d=fa[b],e=da(C,d.relative_pos),f=c=0,g=m.nav.marker.height*m.nav.rows.full.length,h=e.end-e.begin;if(d.tag!=""){g=m.nav.marker.height*m.nav.rows.full.length/m.nav.rows.current.length;for(c=0;c<M.length;c++)c<m.nav.rows.current.length&&d.tag==M[c]&&(f=c);c=m.nav.rows.current[f]}else c=-1;if(a){VMM.Lib.stop(d.content);VMM.Lib.stop(d.text_content);VMM.Lib.animate(d.content,m.duration/2,m.ease,{top:c,left:e.begin,width:h,height:g});VMM.Lib.animate(d.text_content,m.duration/2,
m.ease,{left:e.begin})}else{VMM.Lib.stop(d.content);VMM.Lib.stop(d.text_content);VMM.Lib.css(d.content,"left",e.begin);VMM.Lib.css(d.content,"width",h);VMM.Lib.css(d.content,"height",g);VMM.Lib.css(d.content,"top",c);VMM.Lib.css(d.text_content,"left",e.begin)}}}function Z(a,b,c,e){var g=0,h=m.width,j=d-h,h=f+h;not_too_many=true;i=0;m.nav.minor_left=0;if(b.length>100){not_too_many=false;trace("TOO MANY "+b.length)}for(i=0;i<b.length;i++){var k=b[i].element,n=b[i].visible,o=da(C,b[i].relative_pos).begin,
p=b[i].animation,l=true,q=false;p.pos=o;p.animate=false;Math.abs(o)>=j&&Math.abs(o)<=h&&(q=true);m.nav.multiplier.current>16&&e?l=false:o-g<65&&(o-g<35?i%4==0?o==0&&(l=false):l=false:VMM.Util.isEven(i)||(l=false));if(l){if(b[i].is_detached){VMM.Lib.append(a,k);b[i].is_detached=false}}else{b[i].is_detached=true;VMM.Lib.detach(k)}if(n)if(l){p.opacity="100";if(c&&q)p.animate=true}else{p.opacity="0";if(c&&not_too_many)p.animate=true;b[i].interval_visible=false}else{p.opacity="100";if(l){if(c&&not_too_many)p.animate=
true;else if(c&&q)p.animate=true;b[i].interval_visible=true}else if(c&&not_too_many)p.animate=true}g=o;if(o>m.nav.minor_width)m.nav.minor_width=o;if(o<m.nav.minor_left)m.nav.minor_left=o;if(p.animate)VMM.Lib.animate(k,m.duration/2,m.ease,{opacity:p.opacity,left:p.pos});else{VMM.Lib.css(k,"opacity",p.opacity);VMM.Lib.css(k,"left",o)}}m.nav.constraint.right_min=-m.nav.minor_width+m.width;m.nav.constraint.right=m.nav.constraint.right_min+m.width/2;VMM.Lib.css(ga,"left",m.nav.minor_left-m.width/2);VMM.Lib.width(ga,
m.nav.minor_width+m.width+Math.abs(m.nav.minor_left))}function pa(a,b,c){var d=0,e=true,f=0,g,h,j=Math.ceil(a.number)+2,k=false,m=0,o=0;VMM.attachElement(c,"");a.date=new Date(p[0].startdate.getFullYear(),0,1,0,0,0);g=a.date.getTimezoneOffset();for(o=0;o<j;o++){trace(a.type);var n=false,l={element:VMM.appendAndGetElement(c,"<div>",a.classname),date:new Date(p[0].startdate.getFullYear(),0,1,0,0,0),visible:false,date_string:"",type:a.interval_type,relative_pos:0,is_detached:false,animation:{animate:false,
pos:"",opacity:"100"}};if(a.type=="eon"){e&&(h=Math.floor(p[0].startdate.getFullYear()/5E8)*5E8);l.date.setFullYear(h+d*5E8);n=true}else if(a.type=="era"){e&&(h=Math.floor(p[0].startdate.getFullYear()/1E8)*1E8);l.date.setFullYear(h+d*1E8);n=true}else if(a.type=="epoch"){e&&(h=Math.floor(p[0].startdate.getFullYear()/1E7)*1E7);l.date.setFullYear(h+d*1E7);n=true}else if(a.type=="age"){e&&(h=Math.floor(p[0].startdate.getFullYear()/1E6)*1E6);l.date.setFullYear(h+d*1E6);n=true}else if(a.type=="millenium"){e&&
(h=Math.floor(p[0].startdate.getFullYear()/1E3)*1E3);l.date.setFullYear(h+d*1E3);n=true}else if(a.type=="century"){e&&(h=Math.floor(p[0].startdate.getFullYear()/100)*100);l.date.setFullYear(h+d*100);n=true}else if(a.type=="decade"){e&&(h=Math.floor(p[0].startdate.getFullYear()/10)*10);l.date.setFullYear(h+d*10);n=true}else if(a.type=="year"){e&&(h=p[0].startdate.getFullYear());l.date.setFullYear(h+d);n=true}else if(a.type=="month"){e&&(h=p[0].startdate.getMonth());l.date.setMonth(h+d)}else if(a.type==
"week"){e&&(h=p[0].startdate.getMonth());l.date.setMonth(p[0].startdate.getMonth());l.date.setDate(h+d*7)}else if(a.type=="day"){e&&(h=p[0].startdate.getDate());l.date.setMonth(p[0].startdate.getMonth());l.date.setDate(h+d)}else if(a.type=="hour"){e&&(h=p[0].startdate.getHours());l.date.setMonth(p[0].startdate.getMonth());l.date.setDate(p[0].startdate.getDate());l.date.setHours(h+d)}else if(a.type=="minute"){e&&(h=p[0].startdate.getMinutes());l.date.setMonth(p[0].startdate.getMonth());l.date.setDate(p[0].startdate.getDate());
l.date.setHours(p[0].startdate.getHours());l.date.setMinutes(h+d)}else if(a.type=="second"){e&&(h=p[0].startdate.getSeconds());l.date.setMonth(p[0].startdate.getMonth());l.date.setDate(p[0].startdate.getDate());l.date.setHours(p[0].startdate.getHours());l.date.setMinutes(p[0].startdate.getMinutes());l.date.setSeconds(h+d)}else if(a.type=="millisecond"){e&&(h=p[0].startdate.getMilliseconds());l.date.setMonth(p[0].startdate.getMonth());l.date.setDate(p[0].startdate.getDate());l.date.setHours(p[0].startdate.getHours());
l.date.setMinutes(p[0].startdate.getMinutes());l.date.setSeconds(p[0].startdate.getSeconds());l.date.setMilliseconds(h+d)}if(VMM.Browser.browser=="Firefox")if(l.date.getFullYear()=="1970"&&l.date.getTimezoneOffset()!=g){trace("FIREFOX 1970 TIMEZONE OFFSET "+l.date.getTimezoneOffset()+" SHOULD BE "+g);trace(a.type+" "+a.date);m=l.date.getTimezoneOffset()/60;k=true;l.date.setHours(l.date.getHours()+m)}else if(k){k=false;l.date.setHours(l.date.getHours()+m);n&&(k=true)}l.date_string=n?l.date.getFullYear()<
0?Math.abs(l.date.getFullYear()).toString()+" B.C.":l.date.getFullYear():VMM.Date.prettyDate(l.date,true);d=d+1;e=false;l.relative_pos=ka(C,l.date);if(l.relative_pos.begin>f)f=l.relative_pos.begin;VMM.appendElement(l.element,l.date_string);VMM.Lib.css(l.element,"text-indent",-(VMM.Lib.width(l.element)/2));VMM.Lib.css(l.element,"opacity","0");b.push(l)}VMM.Lib.width(ga,f);Z(c,b)}trace("VMM.Timeline.TimeNav");var R,la,ha,sa,$,ea,ba,qa,ra,ga,T,ia,ja,U,m=VMM.Timeline.Config,D={},Q=a,p=[],fa=[],I=[],W=
[],aa=[],M=[],X=0,ta=false,V;f=d=e="";L=864E5;B=7;J=30.4166666667;t=12;w=24;H=1440;n=86400;F=10;G=100;z=1E3;E=1E6;O=1E7;q=1E8;y=5E8;var C={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"_idd",interval_type:"interval"},P={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"major",interval_type:"interval major"};r={};l={};o={};v={};s={};A={};j={};g={};h={};a=m.nav.marker.height/2;m.nav.rows={full:[1,a*2,a*4],half:[1,a,a*2,a*3,a*4,a*5],current:[]};if(b!=null&&b!=
"")m.nav.width=b;if(c!=null&&c!="")m.nav.height=c;this.init=function(a,b){trace("VMM.Timeline.TimeNav init");typeof a!="undefined"?this.setData(a,b):trace("WAITING ON DATA")};this.setData=function(a,b){if(typeof a!="undefined"){p={};p=a;V=b;var c=0,c=0;VMM.attachElement(Q,"");R=VMM.appendAndGetElement(Q,"<div>","timenav");la=VMM.appendAndGetElement(R,"<div>","content");ha=VMM.appendAndGetElement(R,"<div>","time");sa=VMM.appendAndGetElement(ha,"<div>","time-interval-minor");ga=VMM.appendAndGetElement(sa,
"<div>","minor");ea=VMM.appendAndGetElement(ha,"<div>","time-interval-major");$=VMM.appendAndGetElement(ha,"<div>","time-interval");ba=VMM.appendAndGetElement(Q,"<div>","timenav-background");qa=VMM.appendAndGetElement(ba,"<div>","timenav-line");ra=VMM.appendAndGetElement(ba,"<div>","timenav-indicator");VMM.appendAndGetElement(ba,"<div>","timenav-interval-background","<div class='top-highlight'></div>");T=VMM.appendAndGetElement(Q,"<div>","vco-toolbar");var d=c=0;D=Y(p[p.length-1].enddate-p[0].startdate,
true);trace(D);c=Y(p[0].startdate);d=Y(p[p.length-1].enddate);h.type="millenium";h.first=c.milleniums;h.base=Math.floor(c.milleniums);h.last=d.milleniums;h.number=D.milleniums;h.multiplier=1E3;h.minor=1E3;g.type="century";g.first=c.centuries;g.base=Math.floor(c.centuries);g.last=d.centuries;g.number=D.centuries;g.multiplier=100;g.minor=100;j.type="decade";j.first=c.decades;j.base=Math.floor(c.decades);j.last=d.decades;j.number=D.decades;j.multiplier=10;j.minor=10;o.type="year";o.first=c.years;o.base=
Math.floor(c.years);o.last=d.years;o.number=D.years;o.multiplier=1;o.minor=12;l.type="month";l.first=c.months;l.base=Math.floor(c.months);l.last=d.months;l.number=D.months;l.multiplier=1;l.minor=Math.round(4.34812141);r.type="day";r.first=c.days;r.base=Math.floor(c.days);r.last=d.days;r.number=D.days;r.multiplier=1;r.minor=24;v.type="hour";v.first=c.hours;v.base=Math.floor(c.hours);v.last=d.hours;v.number=D.hours;v.multiplier=1;v.minor=60;s.type="minute";s.first=c.minutes;s.base=Math.floor(c.minutes);
s.last=d.minutes;s.number=D.minutes;s.multiplier=1;s.minor=60;A.type="decade";A.first=c.seconds;A.base=Math.floor(c.seconds);A.last=d.seconds;A.number=D.seconds;A.multiplier=1;A.minor=10;if(D.centuries>p.length/m.nav.density){C=g;P=h}else if(D.decades>p.length/m.nav.density){C=j;P=g}else if(D.years>p.length/m.nav.density){C=o;P=j}else if(D.months>p.length/m.nav.density){C=l;P=o}else if(D.days>p.length/m.nav.density){C=r;P=l}else if(D.hours>p.length/m.nav.density){C=v;P=r}else if(D.minutes>p.length/
m.nav.density){C=s;P=v}else if(D.seconds>p.length/m.nav.density){C=A;P=s}else{trace("NO IDEA WHAT THE TYPE SHOULD BE");C=r;P=l}trace("INTERVAL TYPE: "+C.type);trace("INTERVAL MAJOR TYPE: "+P.type);pa(C,W,$);pa(P,aa,ea);for(c=0;c<W.length;c++)for(d=0;d<aa.length;d++)W[c].date_string==aa[d].date_string&&VMM.attachElement(W[c].element,"");c=c=c=0;I=[];fa=[];for(c=0;c<p.length;c++){var e,f,n,q="",t=false,d=VMM.appendAndGetElement(la,"<div>","marker");e=VMM.appendAndGetElement(d,"<div>","flag");f=VMM.appendAndGetElement(e,
"<div>","flag-content");VMM.appendAndGetElement(d,"<div>","dot");n=VMM.appendAndGetElement(d,"<div>","line");n=VMM.appendAndGetElement(n,"<div>","event-line");_marker_relative_pos=ka(C,p[c].startdate,p[c].enddate);_marker_thumb="";p[c].asset!=null&&p[c].asset!=""?VMM.appendElement(f,VMM.MediaElement.thumbnail(p[c].asset,24,24,p[c].uniqueid)):VMM.appendElement(f,"<div style='margin-right:7px;height:50px;width:2px;float:left;'></div>");if(p[c].title==""||p[c].title==" "){trace("TITLE NOTHING");if(typeof p[c].slug!=
"undefined"&&p[c].slug!=""){trace("SLUG");q=VMM.Util.untagify(p[c].slug);t=true}else{t=VMM.MediaType(p[c].asset.media);if(t.type=="quote"||t.type=="unknown"){q=VMM.Util.untagify(t.id);t=true}else t=false}}else if(p[c].title!=""||p[c].title!=" "){trace(p[c].title);q=VMM.Util.untagify(p[c].title);t=true}else trace("TITLE SLUG NOT FOUND "+p[c].slug);if(t)VMM.appendElement(f,"<h3>"+q+"</h3>");else{VMM.appendElement(f,"<h3>"+q+"</h3>");VMM.appendElement(f,"<h3 id='marker_content_"+p[c].uniqueid+"'>"+q+
"</h3>")}VMM.Lib.attr(d,"id",("marker_"+p[c].uniqueid).toString());VMM.bindEvent(e,ua,"",{number:c});VMM.bindEvent(e,va,"mouseenter mouseleave",{number:c,elem:e});d={marker:d,flag:e,lineevent:n,type:"marker",full:true,relative_pos:_marker_relative_pos,tag:p[c].tag,pos_left:0};if(p[c].type=="start"){trace("BUILD MARKER HAS START PAGE");m.start_page=true;d.type="start"}if(p[c].type=="storify")d.type="storify";p[c].tag&&M.push(p[c].tag);I.push(d)}M=VMM.Util.deDupeArray(M);m.nav.rows.current=M.length>
3?m.nav.rows.half:m.nav.rows.full;for(c=0;c<M.length;c++)if(c<m.nav.rows.current.length){d=VMM.appendAndGetElement(ba,"<div>","timenav-tag");VMM.Lib.addClass(d,"timenav-tag-row-"+(c+1));M.length>3?VMM.Lib.addClass(d,"timenav-tag-size-half"):VMM.Lib.addClass(d,"timenav-tag-size-full");VMM.appendElement(d,"<div><h3>"+M[c]+"</h3></div>")}if(M.length>3)for(c=0;c<I.length;c++){VMM.Lib.addClass(I[c].flag,"flag-small");I[c].full=false}for(d=d=c=0;d<V.length;d++){e={content:VMM.appendAndGetElement(la,"<div>",
"era"),text_content:VMM.appendAndGetElement($,"<div>","era"),startdate:VMM.Date.parse(V[d].startDate),enddate:VMM.Date.parse(V[d].endDate),title:V[d].headline,uniqueid:VMM.Util.unique_ID(6),tag:"",relative_pos:""};VMM.Date.prettyDate(e.startdate);VMM.Date.prettyDate(e.enddate);if(typeof V[d].tag!="undefined")e.tag=V[d].tag;e.relative_pos=ka(C,e.startdate,e.enddate);VMM.Lib.attr(e.content,"id",e.uniqueid);VMM.Lib.attr(e.text_content,"id",e.uniqueid+"_text");VMM.Lib.addClass(e.content,"era"+(c+1));
VMM.Lib.addClass(e.text_content,"era"+(c+1));c<6?c++:c=0;VMM.appendElement(e.content,"<div>&nbsp;</div>");VMM.appendElement(e.text_content,VMM.Util.unlinkify(e.title));fa.push(e)}c=m.nav.multiplier.current;for(d=d=0;d<c;d++){n=e=n=0;f=[];for(q=q=0;q<I.length;q++)if(p[q].type!="start"){t=da(C,I[q].relative_pos);n=e;e=t.begin;n=e-n;f.push(n)}if(VMM.Util.average(f).mean<75&&m.nav.multiplier.current>1)m.nav.multiplier.current=m.nav.multiplier.current-1}na(false);oa();Z($,W,false,true);Z(ea,aa);if(m.start_page){$backhome=
VMM.appendAndGetElement(T,"<div>","back-home","<div class='icon'></div>");VMM.bindEvent(".back-home",S,"click");VMM.Lib.attribute($backhome,"title",VMM.master_config.language.messages.return_to_title);VMM.Lib.attribute($backhome,"rel","timeline-tooltip")}U=new VMM.DragSlider;U.createPanel(Q,R,m.nav.constraint,m.touch);if(m.touch&&m.start_page){VMM.Lib.addClass(T,"touch");VMM.Lib.css(T,"top",55);VMM.Lib.css(T,"left",10)}else{m.start_page&&VMM.Lib.css(T,"top",27);ia=VMM.appendAndGetElement(T,"<div>",
"zoom-in","<div class='icon'></div>");ja=VMM.appendAndGetElement(T,"<div>","zoom-out","<div class='icon'></div>");VMM.bindEvent(ia,u,"click");VMM.bindEvent(ja,N,"click");VMM.Lib.attribute(ia,"title",VMM.master_config.language.messages.expand_timeline);VMM.Lib.attribute(ia,"rel","timeline-tooltip");VMM.Lib.attribute(ja,"title",VMM.master_config.language.messages.contract_timeline);VMM.Lib.attribute(ja,"rel","timeline-tooltip");T.tooltip({selector:"div[rel=timeline-tooltip]",placement:"right"});VMM.bindEvent(Q,
K,"DOMMouseScroll");VMM.bindEvent(Q,K,"mousewheel")}if(m.nav.zoom.adjust!=0)if(m.nav.zoom.adjust<0)for(c=0;c<Math.abs(m.nav.zoom.adjust);c++)N();else for(c=0;c<m.nav.zoom.adjust;c++)u();ta=true;k(true);VMM.fireEvent(Q,"LOADED")}else trace("NO DATA")};this.setSize=function(a,b){if(a!=null)m.width=a;if(b!=null)m.height=b;ta&&k()};this.setMarker=function(a,b,c){ca(a,b,c)};this.getCurrentNumber=function(){return X}});
"undefined"!==typeof VMM.Timeline&&"undefined"==typeof VMM.Timeline.DataObj&&(VMM.Timeline.DataObj={data_obj:{},model_array:[],getData:function(a){VMM.Timeline.DataObj.data_obj={};VMM.fireEvent(global,VMM.Timeline.Config.events.messege,VMM.Timeline.Config.language.messages.loading_timeline);if(type.of(a)=="object"){trace("DATA SOURCE: JSON OBJECT");VMM.Timeline.DataObj.parseJSON(a)}else if(type.of(a)=="string")if(a.match("%23")){trace("DATA SOURCE: TWITTER SEARCH");VMM.Timeline.DataObj.model.tweets.getData("%23medill")}else if(a.match("spreadsheet")){trace("DATA SOURCE: GOOGLE SPREADSHEET");
VMM.Timeline.DataObj.model.googlespreadsheet.getData(a)}else if(a.match("storify.com")){trace("DATA SOURCE: STORIFY");VMM.Timeline.DataObj.model.storify.getData(a)}else if(a.match(".jsonp")){trace("DATA SOURCE: JSONP");LoadLib.js(a,VMM.Timeline.DataObj.onJSONPLoaded)}else{trace("DATA SOURCE: JSON");var b="",b=a.indexOf("?")>-1?a+"&callback=onJSONP_Data":a+"?callback=onJSONP_Data";VMM.getJSON(b,VMM.Timeline.DataObj.parseJSON)}else if(type.of(a)=="html"){trace("DATA SOURCE: HTML");VMM.Timeline.DataObj.parseHTML(a)}else trace("DATA SOURCE: UNKNOWN")},
onJSONPLoaded:function(){trace("JSONP IS LOADED");VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,storyjs_jsonp_data)},parseHTML:function(){trace("parseHTML");trace("WARNING: THIS IS STILL ALPHA AND WILL NOT WORK WITH ID's other than #timeline");var a=VMM.Timeline.DataObj.data_template_obj;if(VMM.Lib.find("#timeline section","time")[0]){a.timeline.startDate=VMM.Lib.html(VMM.Lib.find("#timeline section","time")[0]);a.timeline.headline=VMM.Lib.html(VMM.Lib.find("#timeline section","h2"));
a.timeline.text=VMM.Lib.html(VMM.Lib.find("#timeline section","article"));var b=false;if(VMM.Lib.find("#timeline section","figure img").length!=0){b=true;a.timeline.asset.media=VMM.Lib.attr(VMM.Lib.find("#timeline section","figure img"),"src")}else if(VMM.Lib.find("#timeline section","figure a").length!=0){b=true;a.timeline.asset.media=VMM.Lib.attr(VMM.Lib.find("#timeline section","figure a"),"href")}if(b){if(VMM.Lib.find("#timeline section","cite").length!=0)a.timeline.asset.credit=VMM.Lib.html(VMM.Lib.find("#timeline section",
"cite"));if(VMM.Lib.find(this,"figcaption").length!=0)a.timeline.asset.caption=VMM.Lib.html(VMM.Lib.find("#timeline section","figcaption"))}}VMM.Lib.each("#timeline li",function(){var b={type:"default",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};if(VMM.Lib.find(this,"time")!=0){b.startDate=VMM.Lib.html(VMM.Lib.find(this,"time")[0]);if(VMM.Lib.find(this,"time")[1])b.endDate=VMM.Lib.html(VMM.Lib.find(this,"time")[1]);b.headline=VMM.Lib.html(VMM.Lib.find(this,
"h3"));b.text=VMM.Lib.html(VMM.Lib.find(this,"article"));var d=false;if(VMM.Lib.find(this,"figure img").length!=0){d=true;b.asset.media=VMM.Lib.attr(VMM.Lib.find(this,"figure img"),"src")}else if(VMM.Lib.find(this,"figure a").length!=0){d=true;b.asset.media=VMM.Lib.attr(VMM.Lib.find(this,"figure a"),"href")}if(d){if(VMM.Lib.find(this,"cite").length!=0)b.asset.credit=VMM.Lib.html(VMM.Lib.find(this,"cite"));if(VMM.Lib.find(this,"figcaption").length!=0)b.asset.caption=VMM.Lib.html(VMM.Lib.find(this,
"figcaption"))}trace(b);a.timeline.date.push(b)}});VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,a)},parseJSON:function(a){trace("parseJSON");if(a.timeline.type=="default"){trace("DATA SOURCE: JSON STANDARD TIMELINE");VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,a)}else if(a.timeline.type=="twitter"){trace("DATA SOURCE: JSON TWEETS");VMM.Timeline.DataObj.model_Tweets.buildData(a)}else{trace("DATA SOURCE: UNKNOWN JSON");trace(type.of(a.timeline))}},model:{googlespreadsheet:{getData:function(a){function b(){c=
VMM.getJSON(f,function(a){clearTimeout(e);VMM.Timeline.DataObj.model.googlespreadsheet.buildData(a)}).error(function(a,b){trace("Google Docs ERROR");trace("Google Docs ERROR: "+b+" "+a.responseText)}).success(function(){clearTimeout(e)})}var c,d,f,e,h=0;d=VMM.Util.getUrlVars(a).key;a=VMM.Util.getUrlVars(a).worksheet;typeof a=="undefined"&&(a="od6");f="https://spreadsheets.google.com/feeds/list/"+d+"/"+a+"/public/values?alt=json";e=setTimeout(function(){trace("Google Docs timeout "+f);trace(f);if(h<
3){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Still waiting on Google Docs, trying again "+h);h++;c.abort();b()}else VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Google Docs is not responding")},16E3);b()},buildData:function(a){function b(a){return typeof a!="undefined"?a.$t:""}var c=VMM.Timeline.DataObj.data_template_obj,d=false;VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Parsing Google Doc Data");if(typeof a.feed.entry!="undefined")for(var d=true,f=0;f<a.feed.entry.length;f++){var e=
a.feed.entry[f],h="";if(typeof e.gsx$type!="undefined")h=e.gsx$type.$t;else if(typeof e.gsx$titleslide!="undefined")h=e.gsx$titleslide.$t;if(h.match("start")||h.match("title")){c.timeline.startDate=b(e.gsx$startdate);c.timeline.headline=b(e.gsx$headline);c.timeline.asset.media=b(e.gsx$media);c.timeline.asset.caption=b(e.gsx$mediacaption);c.timeline.asset.credit=b(e.gsx$mediacredit);c.timeline.text=b(e.gsx$text);c.timeline.type="google spreadsheet"}else if(h.match("era")){e={startDate:b(e.gsx$startdate),
endDate:b(e.gsx$enddate),headline:b(e.gsx$headline),text:b(e.gsx$text),tag:b(e.gsx$tag)};c.timeline.era.push(e)}else{e={type:"google spreadsheet",startDate:b(e.gsx$startdate),endDate:b(e.gsx$enddate),headline:b(e.gsx$headline),text:b(e.gsx$text),tag:b(e.gsx$tag),asset:{media:b(e.gsx$media),credit:b(e.gsx$mediacredit),caption:b(e.gsx$mediacaption),thumbnail:b(e.gsx$mediathumbnail)}};c.timeline.date.push(e)}}if(d){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Finished Parsing Data");VMM.fireEvent(global,
VMM.Timeline.Config.events.data_ready,c)}else{VMM.fireEvent(global,VMM.Timeline.Config.events.messege,VMM.Language.messages.loading+" Google Doc Data (cells)");trace("There may be too many entries. Still trying to load data. Now trying to load cells to avoid Googles limitation on cells");VMM.Timeline.DataObj.model.googlespreadsheet.getDataCells(a.feed.link[0].href)}},getDataCells:function(a){function b(){c=VMM.getJSON(d,function(a){clearTimeout(f);VMM.Timeline.DataObj.model.googlespreadsheet.buildDataCells(a)}).error(function(a,
b){trace("Google Docs ERROR");trace("Google Docs ERROR: "+b+" "+a.responseText)}).success(function(){clearTimeout(f)})}var c,d,f,e=0;d="https://spreadsheets.google.com/feeds/cells/"+VMM.Util.getUrlVars(a).key+"/od6/public/values?alt=json";f=setTimeout(function(){trace("Google Docs timeout "+d);trace(d);if(e<3){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Still waiting on Google Docs, trying again "+e);e++;c.abort();b()}else VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Google Docs is not responding")},
16E3);b()},buildDataCells:function(a){var b=VMM.Timeline.DataObj.data_template_obj,c=false,d=["timeline"],f=[],e=0,h=0;VMM.fireEvent(global,VMM.Timeline.Config.events.messege,VMM.Language.messages.loading_timeline+" Parsing Google Doc Data (cells)");if(typeof a.feed.entry!="undefined"){c=true;for(h=0;h<a.feed.entry.length;h++){var g=a.feed.entry[h];parseInt(g.gs$cell.row)>e&&(e=parseInt(g.gs$cell.row))}for(h=0;h<e+1;h++){g={type:"",startDate:"",endDate:"",headline:"",text:"",tag:"",asset:{media:"",
credit:"",caption:"",thumbnail:""}};f.push(g)}for(h=0;h<a.feed.entry.length;h++){var g=a.feed.entry[h],e="",j;j=g.gs$cell;j=typeof j!="undefined"?j.$t:"";var o=g.gs$cell.col,g=g.gs$cell.row,l="";if(g==1){j=="Start Date"?e="startDate":j=="End Date"?e="endDate":j=="Headline"?e="headline":j=="Text"?e="text":j=="Media"?e="media":j=="Media Credit"?e="credit":j=="Media Caption"?e="caption":j=="Media Thumbnail"?e="thumbnail":j=="Type"?e="type":j=="Tag"&&(e="tag");d.push(e)}else{l=d[o];f[g][l]=j}}for(h=0;h<
f.length;h++){g=f[h];if(g.type.match("start")||g.type.match("title")){b.timeline.startDate=g.startDate;b.timeline.headline=g.headline;b.timeline.asset.media=g.media;b.timeline.asset.caption=g.caption;b.timeline.asset.credit=g.credit;b.timeline.text=g.text;b.timeline.type="google spreadsheet"}else if(g.type.match("era"))b.timeline.era.push({startDate:g.startDate,endDate:g.endDate,headline:g.headline,text:g.text,tag:g.tag});else{g={type:"google spreadsheet",startDate:g.startDate,endDate:g.endDate,headline:g.headline,
text:g.text,tag:g.tag,asset:{media:g.media,credit:g.credit,caption:g.caption,thumbnail:g.thumbnail}};b.timeline.date.push(g)}}}if(c){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Finished Parsing Data");VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,b)}else VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Unable to load Google Doc data source")}},storify:{getData:function(a){var b;VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Loading Storify...");a="http://api.storify.com/v1/stories/"+
a.split("storify.com/")[1]+"?per_page=300&callback=?";b=setTimeout(function(){trace("STORIFY timeout");VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Storify is not responding")},6E3);VMM.getJSON(a,VMM.Timeline.DataObj.model.storify.buildData).error(function(a,b){trace("STORIFY error");trace("STORIFY ERROR: "+b+" "+a.responseText)}).success(function(){clearTimeout(b)})},buildData:function(a){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Parsing Data");var b=VMM.Timeline.DataObj.data_template_obj;
b.timeline.startDate=new Date(a.content.date.created);b.timeline.headline=a.content.title;trace(a);var c="",d=a.content.author.username,f="";if(typeof a.content.author.name!="undefined"){d=a.content.author.name;f=a.content.author.username+"&nbsp;"}typeof a.content.description!="undefined"&&a.content.description!=null&&(c=c+a.content.description);c=c+"<div class='storify'>"+("<div class='vcard author'><a class='screen-name url' href='"+a.content.author.permalink+"' target='_blank'>");c=c+("<span class='avatar'><img src='"+
a.content.author.avatar+"' style='max-width: 32px; max-height: 32px;'></span>");b.timeline.text=c+("<span class='fn'>"+d+"</span>")+("<span class='nickname'>"+f+"<span class='thumbnail-inline'></span></span>")+"</a></div></div>";b.timeline.asset.media=a.content.thumbnail;b.timeline.type="storify";for(c=0;c<a.content.elements.length;c++){var e=a.content.elements[c],h=false;trace(e.type);var g={type:"storify",startDate:e.posted_at,endDate:e.posted_at,headline:" ",slug:"",text:"",asset:{media:"",credit:"",
caption:""}};if(e.type=="image"){if(typeof e.source.name!="undefined")if(e.source.name=="flickr"){g.asset.media="http://flickr.com/photos/"+e.meta.pathalias+"/"+e.meta.id+"/";g.asset.credit="<a href='"+g.asset.media+"'>"+e.attribution.name+"</a>";g.asset.credit=g.asset.credit+(" on <a href='"+e.source.href+"'>"+e.source.name+"</a>")}else if(e.source.name=="instagram"){g.asset.media=e.permalink;g.asset.credit="<a href='"+e.permalink+"'>"+e.attribution.name+"</a>";g.asset.credit=g.asset.credit+(" on <a href='"+
e.source.href+"'>"+e.source.name+"</a>")}else{g.asset.credit="<a href='"+e.permalink+"'>"+e.attribution.name+"</a>";if(typeof e.source.href!="undefined")g.asset.credit=g.asset.credit+(" on <a href='"+e.source.href+"'>"+e.source.name+"</a>");g.asset.media=e.data.image.src}else{g.asset.credit="<a href='"+e.permalink+"'>"+e.attribution.name+"</a>";g.asset.media=e.data.image.src}g.slug=e.attribution.name;if(typeof e.data.image.caption!="undefined"&&e.data.image.caption!="undefined"){g.asset.caption=e.data.image.caption;
g.slug=e.data.image.caption}}else if(e.type=="quote")if(e.permalink.match("twitter")){g.asset.media=e.permalink;g.slug=VMM.Util.untagify(e.data.quote.text)}else{if(e.permalink.match("storify")){h=true;g.asset.media="<blockquote>"+e.data.quote.text.replace(/<\s*\/?\s*b\s*.*?>/g,"")+"</blockquote>"}}else if(e.type=="link"){g.headline=e.data.link.title;g.text=e.data.link.description;g.asset.media=e.data.link.thumbnail!="undefined"&&e.data.link.thumbnail!=""?e.data.link.thumbnail:e.permalink;g.asset.caption=
"<a href='"+e.permalink+"' target='_blank'>"+e.data.link.title+"</a>";g.slug=e.data.link.title}else if(e.type=="text"){if(e.permalink.match("storify")){h=true;if(typeof e.attribution.name!="undefined"){d=e.attribution.name;f=e.attribution.username+"&nbsp;"}var j="<div class='storify'>",j=j+("<blockquote><p>"+e.data.text.replace(/<\s*\/?\s*b\s*.*?>/g,"")+"</p></blockquote>"),j=j+("<div class='vcard author'><a class='screen-name url' href='"+e.attribution.href+"' target='_blank'>"),j=j+("<span class='avatar'><img src='"+
e.attribution.thumbnail+"' style='max-width: 32px; max-height: 32px;'></span>"),j=j+("<span class='fn'>"+d+"</span>"),j=j+("<span class='nickname'>"+f+"<span class='thumbnail-inline'></span></span>"),j=j+"</a></div></div>";g.text=j;if(c+1>=a.content.elements.length)g.startDate=a.content.elements[c-1].posted_at;else if(a.content.elements[c+1].type=="text"&&a.content.elements[c+1].permalink.match("storify"))if(c+2>=a.content.elements.length)g.startDate=a.content.elements[c-1].posted_at;else if(a.content.elements[c+
2].type=="text"&&a.content.elements[c+2].permalink.match("storify"))if(c+3>=a.content.elements.length)g.startDate=a.content.elements[c-1].posted_at;else if(a.content.elements[c+3].type=="text"&&a.content.elements[c+3].permalink.match("storify"))g.startDate=a.content.elements[c-1].posted_at;else{trace("LEVEL 3");g.startDate=a.content.elements[c+3].posted_at}else{trace("LEVEL 2");g.startDate=a.content.elements[c+2].posted_at}else{trace("LEVEL 1");g.startDate=a.content.elements[c+1].posted_at}g.endDate=
g.startDate}}else if(e.type=="video"){g.headline=e.data.video.title;g.asset.caption=e.data.video.description;g.asset.caption=e.source.username;g.asset.media=e.data.video.src}else{trace("NO MATCH ");trace(e)}if(h)g.slug=VMM.Util.untagify(e.data.text);b.timeline.date.push(g)}VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,b)}},tweets:{type:"twitter",buildData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model.tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweets(a.timeline.tweets)},
getData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model.tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweetSearch(a)},onTwitterDataReady:function(a,b){for(var c=VMM.Timeline.DataObj.data_template_obj,d=0;d<b.tweetdata.length;d++){var f={type:"tweets",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};f.startDate=b.tweetdata[d].raw.created_at;f.headline=type.of(b.tweetdata[d].raw.from_user_name)?b.tweetdata[d].raw.from_user_name+
" (<a href='https://twitter.com/"+b.tweetdata[d].raw.from_user+"'>@"+b.tweetdata[d].raw.from_user+"</a>)":b.tweetdata[d].raw.user.name+" (<a href='https://twitter.com/"+b.tweetdata[d].raw.user.screen_name+"'>@"+b.tweetdata[d].raw.user.screen_name+"</a>)";f.asset.media=b.tweetdata[d].content;c.timeline.date.push(f)}VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,c)}}},data_template_obj:{timeline:{headline:"",description:"",asset:{media:"",credit:"",caption:""},date:[],era:[]}},date_obj:{startDate:"2012,2,2,11,30",
headline:"",text:"",asset:{media:"http://youtu.be/vjVfu8-Wp6s",credit:"",caption:""},tags:"Optional"}});
